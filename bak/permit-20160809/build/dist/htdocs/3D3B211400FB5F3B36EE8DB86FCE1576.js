!function(e,n,t,r,o,i,u,a,s,c,f,l,d,g,v,m,p,S,y,w,b,h,x,I){d("User",function(e,n,t){function r(e){if(e===!0)return s.get("user");var n=c.get("user")||{};return e?n[e]:n}function o(e){c.set("user",e),s.set("user",e)}function i(){var e=r();return"administrator"==e.role}function u(e){var n=r();return n.role==e||"administrator"==n.role}function a(e){return u(e)?"":"display: none;"}var s=(e("$"),e("MiniQuery"),e("LocalStorage")),c=e("SessionStorage");return{get:r,set:o,isSuper:i,is:u,display:a}}),d("LocalStorage",function(e,n,t){function r(e,n){c[e]=n,a.set(s,c)}function o(e){return c[e]}function i(e){delete c[e],a.set(s,c)}var u=(e("$"),e("MiniQuery")),a=u.require("LocalStorage"),s="permit-5ED1A2BC804DC930",c=a.get(s)||{};return{set:r,get:o,remove:i}}),d("SessionStorage",function(e,n,t){function r(e,n){c[e]=n,a.set(s,c)}function o(e){return c[e]}function i(e){delete c[e],a.set(s,c)}var u=(e("$"),e("MiniQuery")),a=u.require("SessionStorage"),s="permit-5ED1A2BC804DC930",c=a.get(s)||{};return{set:r,get:o,remove:i}}),l.launch(function(e,n){function t(){var e=u("#txt-number").val(),n=u("#txt-password").val();return e?n?void i({number:e,password:n}):void a.alert("请输入密码"):void a.alert("请输入用户名")}function i(e){var n=a.create("API","User.login"),t=null;n.on({request:function(){t=a.create("Loading"),t.show("登录中...")},response:function(){t.hide()},success:function(e,n,t){f.set(e);var r=a.create("Toast",{text:"登录成功",duration:1500,mask:0});r.show(),c(function(){o.href="index.html"},1500)},fail:function(e,n,t){a.alert("登录失败: {0}({1})",n,e)},error:function(){a.alert("登录错误: 网络繁忙，请稍候再试")}});var r=s.encrypt(e.password);n.post({number:e.number,password:r})}var u=e("$"),a=(e("MiniQuery"),e("KISP")),s=a.require("MD5"),f=e("User");u("#btn-login").on("click",function(){t()}),u(r).on("keyup",function(e){13==e.keyCode&&t()});var l=f.get(!0),d=r.getElementById("txt-number"),g=r.getElementById("txt-password");l?(d.value=l.number,g.focus()):d.focus()})}(top,parent,window,document,location,localStorage,sessionStorage,window.console||{log:function(){},dir:function(){},clear:function(){},error:function(){},info:function(){},debug:function(){},warn:function(){}},history,setTimeout,setInterval,KISP,KISP.require("Module").define,Array,Boolean,Date,Error,Function,Math,Number,Object,RegExp,String);