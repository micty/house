!function(e,t,n,r,i,a,o,u,c,s,f,l,d,v,m,g,h,p,y,b,S,k,x,w){d("API",function(e,t,n){function r(t,n){var r=e("User"),a=r.get("token"),o=i.create("API",t,n),c=o.get.bind(o),s=o.post.bind(o);return o.get=function(e){return e=e||{},e.token=a,c(e)},o.post=function(e,n){return n=n||{},n.token=a,u.log(t,e),s({data:e},n)},o}var i=(e("$"),e("KISP"));return r}),d("Array",function(e,t,n){function r(e,t,n){return n===w&&(n=1),a.Array.keep(e,function(e,r){var i=e.value+t[r].value*n;return a.Object.extend({},e,{value:i})})}function i(e,t){return r(e,t,-1)}var a=e("$");e("MiniQuery"),e("NumberField");return{substract:i}}),d("Bridge",function(t,r){if(n!==e){var i=e.require(r.id);return{on:function(e,t){var r=[].slice.call(arguments,0);i.bind(n,r)},open:function(e,t,n){i.open(e,t,n)},close:function(){i.close(n)},refresh:function(e){i.refresh(e)},data:function(e,t){var n=[].slice.call(arguments,0);return i.data.apply(null,n)}}}var a=t("$"),o=t("MiniQuery"),u=o.require("Emitter"),c=o.require("Mapper"),s=new c,f=new u,l={};return{bind:function(e,t){var n=s.get(e);n||(n=new u,s.set(e,n)),n.on.apply(n,t)},fire:function(e,t,n){var r="object"==typeof t?t.id:t,i=a("iframe").toArray(),o=a.Array.findItem(i,function(e,t){var n=e.getAttribute("data-sn");return n==r});if(o){var u=o.contentWindow,c=s.get(u);if(c){n=n||[];var f=c.fire(e,n),l=f.length;return l>0?f[l-1]:void 0}}},open:function(e,t,n){f.fire("open",[e,t,n])},refresh:function(e){f.fire("refresh",[e])},close:function(e){var t=a("iframe").toArray(),n=a.Array.findItem(t,function(t,n){return t.contentWindow===e});if(n){var r=n.getAttribute("data-sn");f.fire("close",[r])}},data:function(e,t){return 1==arguments.length?(t=l[e],t=JSON.parse(t)):null===t?void delete l[e]:(t=JSON.stringify(t),l[e]=t,t)},on:f.on.bind(f)}}),d("Cell",function(e,t,n){function r(e,t){"object"==typeof e&&(t=e,e="");var n=0;return s.forEach(function(r){r=e+r;var i=t[r]||0;i=b(i)||0,n+=i}),n}function i(e,t){var n=r(e,t);return n=c.text(n)}function a(e,t){var n=e[t]||0;return c.text(n)}function o(e,t){return"object"==typeof e&&(t=e,e=""),u.Array.each(s,function(n){n=e+n,t[n]=a(t,n)}),t}var u=e("$"),c=(e("MiniQuery"),e("NumberField")),s=["residenceCell","commerceCell","officeCell","otherCell"];return{total:r,totalText:i,format:o,text:a}}),d("Chart",function(e,t,r){var i=(e("$"),e("MiniQuery"),n.Chart);return i}),d("DateTimePicker",function(e,t,n){function r(e,t,n){var r=c.get(e),i=r.$this,a=[].slice.call(n,0);return a=[t].concat(a),i.datetimepicker.apply(i,a)}function i(e,t){a.Object.isPlain(e)&&(t=e,e=t.selector,delete t.selector),t=a.Object.extend({},s,t);var n=a(e).datetimepicker(t),r={$this:n};c.set(this,r)}var a=e("$"),o=e("MiniQuery"),u=o.require("Mapper"),c=new u,s={format:"yyyy-mm-dd",autoclose:!0,minView:"month",todayBtn:!0,todayHighlight:!0,pickerPosition:"top-right"};return i.prototype={constructor:i,on:function(e,t){var n=c.get(this),r=n.$this;r.on(e,t)},remove:function(){r(this,"remove",arguments)},show:function(){r(this,"show",arguments)},hide:function(){r(this,"hide",arguments)},update:function(){r(this,"update",arguments)},setStartDate:function(){r(this,"setStartDate",arguments)},setEndDate:function(){r(this,"setEndDate",arguments)},setDaysOfWeekDisabled:function(){r(this,"setDaysOfWeekDisabled",arguments)}},a.Object.extend(i,{config:function(e){return 0==arguments.length?s:void a.Object.extend(s,e)},create:function(e,t){return new i(e,t)}})}),d("LocalStorage",function(e,t,n){function r(e,t){s[e]=t,u.set(c,s)}function i(e){return s[e]}function a(e){delete s[e],u.set(c,s)}var o=(e("$"),e("MiniQuery")),u=o.require("LocalStorage"),c="permit-5ED1A2BC804DC930",s=u.get(c)||{};return{set:r,get:i,remove:a}}),d("Logs",function(t,n,r){var i=(t("$"),t("MiniQuery"),t("KISP")),a=i.create("Panel"),o=null;return a.on("init",function(){o=i.create("Dialog",{title:"处理结果",text:"<textarea readonly></textarea>",buttons:[{text:"确定",name:"ok"}],cssClass:"dialog-Logs",height:500,width:800,autoClosed:!0,"z-index":9999}),o.on("show",function(){var t=e.document.body.scrollTop+20;o.$.css("top",t)}),o.on("button","ok",function(){var e=o.data("ok");e&&e()})}),a.on("render",function(e,t){v.isArray(e)&&(e=e.join("\n")),o.data("ok",t),o.show(),o.$.find("textarea").val(e)}),a.wrap()}),d("Multitask",function(e,t,n){function r(e){return u.Array.keep(e,function(e,t){return!1})}function i(e,t){var n=e&&e.length>0;n&&(u.Array.each(e,function(e,t){if(!e)return n=!1,!1}),n&&t&&t(e))}function a(e,t){var n=r(e);u.Array.each(e,function(e,r){if("function"==typeof e)e(function(e,a){n[r]=e,i(n,t)});else{var a=e.fn,o=e.args||[],u=e.context||null;o.push(function(e,a){n[r]=e,i(n,t)}),a.apply(u,o)}})}function o(e,t){var n=r(e),i=0,a=e.length;!function(){var r=arguments.callee,o=e[i];o(function(e){n[i]=e,i++,i<a?r():t&&t(n)})}()}var u=e("$");return{concurrency:a,serial:o}}),d("NumberField",function(e,t,n){function i(e){var t={};return u.Object.each(e,function(e,n){var r=l[e];if(r){var i=d[e];i&&(n=i[n]),t[r]=n}else t[e]=n}),t}function a(e,t,n){var r=f.get(e),i=r.$this,a=[].slice.call(n,0);return a=[t].concat(a),i.autoNumeric.apply(i,a)}function o(e,t){u.Object.isPlain(e)&&(t=e,e=t.selector,delete t.selector),t=u.Object.extend({},v,t),t=i(t);var n=u(e).autoNumeric(t),r={$this:n};f.set(this,r)}var u=e("$"),c=e("MiniQuery"),s=c.require("Mapper"),f=new s,l={groupSign:"aSep",groupCount:"dGroup",decimalSign:"aDec",decimalKey:"altDec",currencySign:"aSign",currencyPlace:"pSign",min:"vMin",max:"vMax",decimalCount:"mDec",round:"mRound",padded:"aPad",bracket:"nBracket",empty:"wEmpty",leadingZero:"lZero",formatted:"aForm"},d={currencyPlace:{left:"p",right:"s"}},v={groupSign:",",groupCount:3,decimalSign:".",decimalKey:null,currencySign:"",currencyPlace:"left",min:"0.00",max:"9999999999999.99",decimalCount:2,round:"S",padded:!1,bracket:null,empty:"empty",leadingZero:"allow",formatted:!0};o.prototype={constructor:o,init:function(){a(this,"init",arguments)},destroy:function(){a(this,"destroy",arguments)},update:function(e){e&&(arguments[0]=i(e)),a(this,"update",arguments)},set:function(){a(this,"set",arguments)},get:function(){return a(this,"get",arguments)},getString:function(){return a(this,"getString",arguments)},getArray:function(){return a(this,"getArray",arguments)},getSettings:function(){return a(this,"getSettings",arguments)}};var m=null,g=null;return u.Object.extend(o,{config:function(e){return 0==arguments.length?v:void u.Object.extend(v,e)},create:function(e,t){return new o(e,t)},update:function(e,t){new o(e).update(t)},value:function(e){var t=new o(e),n=t.get();return n=b(n)},text:function(e,t){return t=u.Object.extend(v,{min:"-9999999999999.99",currencySign:""},t),m||(m=r.createElement("input"),m.type="text",g=new o(m,t)),m.value=e,g.update(t),m.value},money:function(e,t){return t=u.Object.extend({},t,{currencySign:"¥"}),o.text(e,t)}})}),d("$Object",function(e,t){function n(e,t){t=t||".";var i={};return S.keys(e).forEach(function(a){var o=e[a];return r.Object.isPlain(o)?void S.keys(o).forEach(function(e){var r=o[e];if(r&&"object"==typeof r){var u=n(o,t);S.keys(u).forEach(function(e){i[a+t+e]=u[e]})}else i[a+t+e]=r}):void(i[a]=o)}),i}var r=e("$");return{linear:n}}),d("Pager/Helper",function(e,t){function n(e,t){return e<=10?[{from:1,to:e,more:!1}]:t<=3?[{from:1,to:5,more:!0}]:t<=5?[{from:1,to:t+2,more:!0}]:t>=e-1?[{from:1,to:2,more:!0},{from:e-5,to:e,more:!1}]:[{from:1,to:2,more:!0},{from:t-2,to:t+2,more:t+2!=e}]}function r(e,t,n){if(e<=1)return e;if(t==e)return e-1;var r;return t>n?r=t+1:(r=t-1,r<1&&(r=2)),r}e("$");return{getRegions:n,getJumpNo:r}}),d("Pager",function(e,t){function n(e,t,n,r){if("object"==typeof t){var i=t;t=i.from,n=i.to,r=i.more}var o=a.Array.pad(t,n+1),u=a.Array.keep(o,function(t,n){var r=t==e;return a.String.format(d.item,{no:t,active:r?"active":"","data-no":r?"":'data-no="'+t+'"'})}).join("");return r&&(u+=d.more),u}function i(e){function t(){var e=r.getElementById(m),t=e.value;p.to(t,!0)}var n=a.String.random().toLowerCase();this[f]="Pager-"+n;var i=e.container,o=e.current||1,u=e.size,s=e.total,d=y.ceil(s/u),v="ul-pager-"+n,m="txt-pager-"+n,g=new c(this),h={ulId:v,txtId:m,container:i,current:o,size:u,count:d,total:s,hideIfLessThen:e.hideIfLessThen||0,emitter:g,last:0};l.set(this,h);var p=this;a.Array.each(["change","error"],function(t,n){var r=e[t];r&&p.on(t,r)});var b={no:"#"+v+" [data-no]",button:"#"+v+" [data-button]:not(.disabled)",txt:"#"+m};a(i).delegate(b.no,"click",function(e){var t=this,n=+t.getAttribute("data-no");p.to(n,!0)}).delegate(b.button,"click",function(e){var n=this,r=n.getAttribute("data-button");"to"==r?t():p[r](!0)}).delegate(b.txt,"keydown",function(e){13==e.keyCode&&t()})}var a=e("$"),o=e("MiniQuery"),u=o.require("Mapper"),c=o.require("Emitter"),s=t.require("Helper"),f=u.getGuidKey(),l=new u,d=a.String.getTemplates(r.body.innerHTML,[{name:"ul",begin:"<!--Samples.Pager--!",end:"--Samples.Pager-->"},{name:"item",begin:"#--item.begin--#",end:"#--item.end--#",outer:"{items}"},{name:"more",begin:"#--more.begin--#",end:"#--more.end--#",outer:""}]);return i.prototype={constructor:i,render:function(){var e=l.get(this),t=e.count;if(t<e.hideIfLessThen)return void a(e.container).hide();var r=y.min(t,e.current),i=s.getRegions(t,r),o=a.Array.keep(i,function(e,t){return n(r,e)}).join(""),u=s.getJumpNo(t,r,e.last),c=a.String.format(d.ul,{"ul-id":e.ulId,"txt-id":e.txtId,current:r,count:t,total:e.total,toNo:u,"first-disabled-class":r==y.min(1,t)?"disabled":"","final-disabled-class":r==t?"disabled":"","jump-disabled-class":0==t?"disabled":"","txt-disabled":0==t?"disabled":"",items:o});a(e.container).html(c).show()},to:function(e,t){var n=l.get(this),r=n.emitter,i=/^\d+$/.test(e);if(!i)return void(t&&r.fire("error",["输入的页码必须是大于 0 的数字"]));e=parseInt(e);var a=n.count;return e<1||e>a?void(t&&r.fire("error",["输入的页码值只能从 1 到 "+a])):(n.last=n.current,n.current=e,this.render(),void(t&&r.fire("change",[e])))},previous:function(e){var t=l.get(this);this.to(t.current-1,e)},next:function(e){var t=l.get(this);this.to(t.current+1,e)},first:function(e){this.to(1,e)},final:function(e){var t=l.get(this);this.to(t.count,e)},refresh:function(e){var t=l.get(this);this.to(t.current,e)},on:function(){var e=l.get(this),t=e.emitter,n=[].slice.call(arguments,0);t.on.apply(t,n)},destroy:function(){var e=l.get(this);e.emitter.off();var t=e.container;a(t).html("").undelegate(),l.remove(this)}},a.Object.extend(i)}),d("SessionStorage",function(e,t,n){function r(e,t){s[e]=t,u.set(c,s)}function i(e){return s[e]}function a(e){delete s[e],u.set(c,s)}var o=(e("$"),e("MiniQuery")),u=o.require("SessionStorage"),c="permit-5ED1A2BC804DC930",s=u.get(c)||{};return{set:r,get:i,remove:a}}),d("Size",function(e,t,n){function r(e,t,n){"object"==typeof e&&(n=t,t=e,e="");var r=0,i="number"==typeof n?s[n]:u.Array.reduceDimension(s);return i.forEach(function(n){n=e+n;var i=t[n]||0;i=b(i)||0,r+=i}),r}function i(e,t,n){var i=r(e,t,n);return i=c.text(i)}function a(e,t){var n=e[t]||0;return c.text(n)}function o(e,t){"object"==typeof e&&(t=e,e="");var n=u.Array.reduceDimension(s);return u.Array.each(n,function(n){n=e+n,t[n]=a(t,n)}),t}var u=e("$"),c=(e("MiniQuery"),e("NumberField")),s=[["residenceSize","commerceSize","officeSize","otherSize"],["parkSize","otherSize1"]];return{total:r,totalText:i,format:o,text:a}}),d("StatUse",function(e,t,n){function r(e,t){var n=i.Array.keep(a,function(t){var n=t.key,r=0;return v.isArray(n)?n.forEach(function(t){r+=e[t]}):r=e[n],{name:t.name,value:r}});if(!t)return n;var r=0;return n.forEach(function(e){r+=e.value}),r/=2,n.unshift({name:t,value:r,group:!0,subGroup:!0}),n}var i=e("$"),a=(e("MiniQuery"),e("NumberField"),[{name:"计容面积",key:["residenceSize","commerceSize","officeSize","otherSize"]},{name:"住宅",key:"residenceSize"},{name:"商业",key:"commerceSize"},{name:"办公",key:"officeSize"},{name:"其它",key:"otherSize"},{name:"不计容面积",key:["parkSize","otherSize1"]},{name:"地下车库",key:"parkSize"},{name:"其它",key:"otherSize1"}]);return{get:r}}),d("Tabs",function(e,t,n){function r(e){var t=this;this[s]="Tabs-"+i.String.random();var n=e.container,r=e.selector,a=e.activedClass,o=e.event,f=new u(this),l={container:n,selector:r,activedClass:a,eventName:o,activedIndex:-1,emitter:f};c.set(this,l),o&&i(n).delegate(r,o,function(a){var o,u=this;if("indexKey"in e)o=+u.getAttribute(e.indexKey);else{var c=i(n).find(r).toArray();o=i.Array.findIndex(c,function(e,t){return e===u})}f.fire("event",[o,u]),t.active(o,!0)});var d=e.change;d&&this.on("change",d);var v=e.current;"number"==typeof v&&v>=0&&this.active(v,!0)}var i=e("$"),a=e("MiniQuery"),o=a.require("Mapper"),u=a.require("Emitter"),c=new o,s=o.getGuidKey();return r.prototype={constructor:r,active:function(e,t){var n=c.get(this),r=n.activedIndex;if(e!=r||!t){this.reset(),n.activedIndex=e;var a=n.activedClass,o=i(n.container).find(n.selector).toArray(),u=o[e];i(u).addClass(a),t&&n.emitter.fire("change",[e,u])}},reset:function(){var e=c.get(this);i(e.container).find(e.selector).removeClass(e.activedClass),e.activedIndex=-1},remove:function(e){var t=c.get(this),n=t.activedIndex;return e==n?void this.reset():(e<n&&n--,void this.active(n,!1))},destroy:function(){var e=c.get(this),t=e.eventName;t&&i(e.container).undelegate(e.selector,t),e.emitter.off(),c.remove(this)},on:function(e,t){var n=c.get(this),r=n.emitter,i=[].slice.call(arguments,0);r.on.apply(r,i)},getActivedIndex:function(){var e=c.get(this);return e.activedIndex}},i.Object.extend(r,{create:function(e){return new r(e)}})}),d("Url",function(e,t,n){function r(e){return!(!e||"string"!=typeof e)&&(e=e.toLowerCase(),0==e.indexOf("http://")||0==e.indexOf("https://"))}e("$"),e("MiniQuery");return{checkFull:r}}),d("User",function(e,t,n){function r(e){if(e===!0)return c.get("user");var t=s.get("user")||{};return e?t[e]:t}function i(e){s.set("user",e),c.set("user",e)}function a(){var e=r();return"administrator"==e.role}function o(e){var t=r();return t.role==e||"administrator"==t.role}function u(e){return o(e)?"":"display: none;"}var c=(e("$"),e("MiniQuery"),e("LocalStorage")),s=e("SessionStorage");return{get:r,set:i,isSuper:a,is:o,display:u}}),d("/API",function(e,t,n){function r(e){e=i.Object.extend(l,e||{});var t=new u("Stat.role");t.on({request:function(){f=f||o.create("Loading",{mask:0}),f.show("加载中...")},response:function(){f.hide()},success:function(e,t,n){s.fire("success",[e])},fail:function(e,t,n,r){o.alert("获取数据失败: {0} ({1})",t,e)},error:function(e,t,n,r){o.alert("获取数据错误: 网络繁忙，请稍候再试")}}),t.post(e)}var i=e("$"),a=e("MiniQuery"),o=e("KISP"),u=e("API"),c=a.require("Emitter"),s=new c,f=null,l={beginDate:"",endDate:"",role:""};return{post:r,on:s.on.bind(s)}}),d("/Chart/Color",function(e,t){function n(e,t){var n=i[e],a=r.Object.extend({},n,{A:t});return r.String.format("rgba({R},{G},{B},{A})",a)}var r=e("$"),i=(e("KISP"),[{R:255,G:99,B:132},{R:30,G:90,B:204},{R:79,G:131,B:65},{R:255,G:206,B:67},{R:115,G:39,B:148},{R:60,G:175,B:243},{R:143,G:0,B:0},{R:255,G:140,B:57},{R:0,G:0,B:0}]);return{get:n}}),d("/Chart",function(e,t){var n=e("$"),i=e("KISP"),a=e("Chart"),o=t.require("Color"),c=i.create("Panel","#div-chart"),s=null;return c.on("init",function(){var e=r.getElementById("canvas-chart"),t=e.getContext("2d");s=new a(t,{type:"bar",data:{labels:[],datasets:[]}})}),c.on("render",function(e){u.dir(e);var t=["南庄","石湾","张槎","祖庙"],r=e.slice(0,9).map(function(e,t){return{backgroundColor:o.get(t,.3),borderColor:o.get(t,1),borderWidth:1,hoverBackgroundColor:o.get(t,.5),hoverBorderColor:o.get(t,1),label:e[0].text,data:e.slice(2).map(function(e){return e.value.toFixed(2)})}});n.Object.extend(s.data,{labels:t,datasets:r}),s.update()}),c.wrap()}),d("/Filter/Dates",function(e,t){var n=e("$"),r=e("KISP"),i=e("DateTimePicker"),a=r.create("Panel","#li-filter-dates"),o={},u=null;return a.on("init",function(){i.create('[data-type="date"]',{pickerPosition:"bottom-right"}),a.$.on("change",'[data-type="date"]',function(){var e=this.name,t=this.value;o[e]=t;var i=o.begin,c=o.end;return i&&c&&(i=n.Date.parse(i),c=n.Date.parse(c),i>c)?(u=u||r.create("Toast",{icon:"times",duration:1500}),void u.show("开始日期不能比结束日期大")):(i=o.begin||"",c=o.end||"",void a.fire("change",[i,c]))})}),a.on("render",function(){}),a.wrap()}),d("/Filter",function(e,t){var n=(e("$"),e("KISP")),r=t.require("Dates"),i=n.create("Panel","#ul-filter");return i.on("init",function(){r.on("change",function(e,t){i.fire("dates",[e,t])})}),i.on("render",function(){r.render()}),i.wrap({set:function(e,t){i.$.toggleClass(e,t)}})}),d("/Formater/Group",function(e,t,n){function r(e){var t=o.Array.map(s,function(t){var n=t.key,r=e[n];if(!r)return null;var i=t.name,c=o.Array.map(f,function(e){var t=e.key;if(!t)return[];var n=r[t],a=u.get(n,i);return a}),s=c.slice(1);if(c[0]=c[1].map(function(e,t){var n=0;return s.forEach(function(e){n+=e[t].value}),{name:e.name,value:n}}),o.Object.extend(c[0][0],{group:!0,subGroup:!0}),"land"==n){var l=a(r);l.forEach(function(e,t){c[t].unshift(e)})}return c});return t}function i(e,t,n){var r=o.Array.keep(e,function(e,r){return e=c.substract(e,t[r]),e[0].name=n,e});return r}function a(e){var t=0,n=o.Array.map(f,function(n){var r=n.key;if(!r)return{name:"土地出让面积",value:0,group:!0,subGroup:!0};var i=e[r],a=i.size;return t+=a,{name:n.name,value:a}});return n[0].value=t,n}var o=e("$"),u=e("StatUse"),c=e("Array"),s=[{name:"出让可建面积",key:"land"},{name:"已办规划许可",key:"plan"},{name:"已办施工许可",key:"construct"},{name:"已办预售许可",key:"prepare"},{name:"预售已售面积",key:"saled-prepare"},{name:"已办现售备案",key:"doing"},{name:"现售已售面积",key:"saled-doing"}],f=[{key:"",name:"合计"},{key:"南庄",name:"南庄"},{key:"石湾",name:"石湾"},{key:"张槎",name:"张槎"},{key:"祖庙",name:"祖庙"}];return{get:r,substract:i}}),d("/Formater",function(e,t,n){function r(e,t){var n="land"==t,r=o.get(e),u=i.Array.keep(r,function(e,t){var r=e,o=i.Array.keep(r[0],function(e,t){var r=n?t<=1:0==t;return{text:e.name,isName:!0,group:r,subGroup:r,hidden:e.hidden}}),u=i.Array.keep(r,function(e,t){return e=i.Array.keep(e,function(e,t){var r=n?t<=1:0==t,i=e.value;return{value:i,text:a.text(i),group:r,subGroup:r,hidden:e.hidden}})}),c=[o].concat(u);return c}),c=[];i.Array.each(u,function(e,t){i.Array.each(e,function(e,t){c[t]=c[t]||[],c[t]=c[t].concat(e)})});var s=i.Array.transpose(c);return{rows:s}}var i=e("$"),a=(e("MiniQuery"),e("KISP"),e("NumberField")),o=t.require("Group");return{format:r}}),d("/Header",function(e,t){var n=(e("$"),e("KISP")),r=(e("User"),n.create("Panel","#div-header"));return r.on("init",function(){r.$.on("click","button",function(){r.fire("print")})}),r.on("render",function(){}),r.wrap()}),d("/SaleTabs",function(e,t){var n=(e("$"),e("KISP")),r=n.create("Panel","#ul-sale-tabs"),i=null,a=0,o=[{key:"",name:"已办预售许可"},{key:"",name:"预售已售面积"},{key:"",name:"已办现售备案"},{key:"",name:"现售已售面积"}];return r.on("init",function(){i=n.create("Tabs",{container:r.$.get(0),activedClass:"on",eventName:"click",repeated:!0}),i.on("change",function(e,t){a=t,e=o[t],r.fire("change",[e,t])})}),r.on("render",function(e){i.render(o,function(e,t){return{index:t,name:e.name}}),e===w&&(e=a),i.active(e)}),r.wrap()}),d("/Table",function(e,t){var n=(e("$"),e("KISP")),r=(e("SessionStorage"),n.create("Panel","#div-table"));return r.on("init",function(){r.template(["row","col"],function(e,t){return{data:{},list:e.rows,fn:function(e,t){return{data:{},list:e,fn:function(e,t){return{data:{text:e.text,"name-value-class":e.isName?"name":"value","group-class":e.group?"group":"","sub-group-class":e.subGroup?"sub-group":"","hidden-class":e.hidden?"hidden":""}}}}}}})}),r.on("render",function(e){r.fill(e)}),r.wrap()}),d("/Tabs",function(e,t){var n=(e("$"),e("KISP")),r=n.create("Panel","#ul-tabs"),i=null,a=[{key:"land",name:"土地"},{key:"plan",name:"规划"},{key:"construct",name:"建设"},{key:"sale",name:"销售"}];return r.on("init",function(){i=n.create("Tabs",{container:r.$.get(0),activedClass:"on",eventName:"click"}),i.on("change",function(e,t){e=a[t],r.fire("change",[e,t])})}),r.on("render",function(e){e=e||0,i.render(a,function(e,t){return{index:t,name:e.name}}),i.active(e)}),r.wrap()}),d("/Title",function(e,t){var n=(e("$"),e("KISP")),r=n.create("Panel","#div-title");return r.on("init",function(){}),r.on("render",function(e){r.fill(e)}),r.wrap()}),l.launch(function(e,t){var i=(e("$"),e("MiniQuery")),a=(e("KISP"),i.require("Url")),o=(e("Bridge"),t.require("API")),u=t.require("Chart"),c=t.require("Formater"),s=t.require("Table"),f=t.require("Tabs"),l=t.require("SaleTabs"),d=t.require("Title"),v=t.require("Filter"),m=t.require("Header"),g=null,h=a.getQueryString(n,"type")||"",p="";o.on({success:function(e){e=c.format(e,p),"table"==h?s.render(e):s.hide();var t=e.rows;"land"==p&&(t=t.slice(1)),"sale"==p?"chart"==h?(g=t,l.render()):l.hide():(l.hide(),"chart"==h?u.render(t):u.hide())}}),f.on("change",function(e){p=e.key,m.render(),v.render(),d.render(e),o.post({role:p})}),l.on("change",function(e,t){var n=9*t,r=n+9,i=g.slice(n,r);u.render(i)}),v.on({dates:function(e,t){o.post({beginDate:e,endDate:t})}}),m.on({print:function(){m.hide(),f.hide(),v.set("print",!0);var e=r.execCommand("print");e&&(m.show(),f.show(),v.set("print",!1))}}),f.render()})}(top,parent,window,document,location,localStorage,sessionStorage,window.console||{log:function(){},dir:function(){},clear:function(){},error:function(){},info:function(){},debug:function(){},warn:function(){}},history,setTimeout,setInterval,KISP,KISP.require("Module").define,Array,Boolean,Date,Error,Function,Math,Number,Object,RegExp,String);