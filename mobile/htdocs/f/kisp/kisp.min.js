!function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){var C=function(){var a=z.require("Module"),b=new a({seperator:"/",crossover:!0,repeated:!1});return{define:b.define.bind(b),require:b.require.bind(b),expose:b.expose.bind(b),modules:b.modules.bind(b),tree:b.tree.bind(b),bind:function(a,c,d){return function(){var e=b.require(a),f=[].slice.call(arguments,0);d=d===!0?e:d,e[c].apply(d||null,f)}}}}(),D=C.define,E=C.require;D("$",function(a,b,c){return z.use("jQuery"),y}),D("MiniQuery",function(a,b,c){return z}),D("IScroll",function(a,b,c){return A}),D("iSlider",function(a,b,c){return iSlider}),D("KISP",function(a,b,c){var d=null;b.exports=c={name:"default",version:"4.0.0",files:[],modules:C.modules,require:function(b){return C.expose(b)?a(b):null},invoke:function(a,b,d){var e=c.require(a);if(!e)throw new r("不存在该模块或该模块为非公开模块。");var f=e[b];if("function"!=typeof f)throw new r("模块 "+a+" 不存名为 "+b+" 的方法。");return f.apply(e,d)},create:function(a,b){var d=c.require(a);if("function"!=typeof d)return null;var e=arguments,f=e.length-1;return 0==f?new d:1==f?new d(b):2==f?new d(b,e[f]):3==f?new d(b,e[2],e[f]):4==f?new d(b,e[2],e[3],e[f]):5==f?new d(b,e[2],e[3],e[4],e[f]):null},proxy:C.bind("Proxy","response"),config:function(b,c){var d=a("Defaults"),e=arguments.length;return"string"==typeof b&&1==e?d.get(b):void d.set(b,c)},data:function(b,c){if(!d){var e=a("Config");d=new e}return"object"==typeof b?void d.set(b):1==arguments.length?d.get(b):void d.set(b,c)},alert:function(b,c,d,e){var f=[].slice.call(arguments,0),g=a("Alert");g.show.apply(null,f)},confirm:function(b,c){var d=a("Confirm");d.show(b,c)},launch:function(b){var c=a("App"),d=new c("");d.launch(b)}}}),D("MD5",function(a,b,c){function d(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,k=271733878,l=0;l<a.length;l+=16){var m=c,n=d,p=e,q=k;c=f(c,d,e,k,a[l+0],7,-680876936),k=f(k,c,d,e,a[l+1],12,-389564586),e=f(e,k,c,d,a[l+2],17,606105819),d=f(d,e,k,c,a[l+3],22,-1044525330),c=f(c,d,e,k,a[l+4],7,-176418897),k=f(k,c,d,e,a[l+5],12,1200080426),e=f(e,k,c,d,a[l+6],17,-1473231341),d=f(d,e,k,c,a[l+7],22,-45705983),c=f(c,d,e,k,a[l+8],7,1770035416),k=f(k,c,d,e,a[l+9],12,-1958414417),e=f(e,k,c,d,a[l+10],17,-42063),d=f(d,e,k,c,a[l+11],22,-1990404162),c=f(c,d,e,k,a[l+12],7,1804603682),k=f(k,c,d,e,a[l+13],12,-40341101),e=f(e,k,c,d,a[l+14],17,-1502002290),d=f(d,e,k,c,a[l+15],22,1236535329),c=g(c,d,e,k,a[l+1],5,-165796510),k=g(k,c,d,e,a[l+6],9,-1069501632),e=g(e,k,c,d,a[l+11],14,643717713),d=g(d,e,k,c,a[l+0],20,-373897302),c=g(c,d,e,k,a[l+5],5,-701558691),k=g(k,c,d,e,a[l+10],9,38016083),e=g(e,k,c,d,a[l+15],14,-660478335),d=g(d,e,k,c,a[l+4],20,-405537848),c=g(c,d,e,k,a[l+9],5,568446438),k=g(k,c,d,e,a[l+14],9,-1019803690),e=g(e,k,c,d,a[l+3],14,-187363961),d=g(d,e,k,c,a[l+8],20,1163531501),c=g(c,d,e,k,a[l+13],5,-1444681467),k=g(k,c,d,e,a[l+2],9,-51403784),e=g(e,k,c,d,a[l+7],14,1735328473),d=g(d,e,k,c,a[l+12],20,-1926607734),c=h(c,d,e,k,a[l+5],4,-378558),k=h(k,c,d,e,a[l+8],11,-2022574463),e=h(e,k,c,d,a[l+11],16,1839030562),d=h(d,e,k,c,a[l+14],23,-35309556),c=h(c,d,e,k,a[l+1],4,-1530992060),k=h(k,c,d,e,a[l+4],11,1272893353),e=h(e,k,c,d,a[l+7],16,-155497632),d=h(d,e,k,c,a[l+10],23,-1094730640),c=h(c,d,e,k,a[l+13],4,681279174),k=h(k,c,d,e,a[l+0],11,-358537222),e=h(e,k,c,d,a[l+3],16,-722521979),d=h(d,e,k,c,a[l+6],23,76029189),c=h(c,d,e,k,a[l+9],4,-640364487),k=h(k,c,d,e,a[l+12],11,-421815835),e=h(e,k,c,d,a[l+15],16,530742520),d=h(d,e,k,c,a[l+2],23,-995338651),c=i(c,d,e,k,a[l+0],6,-198630844),k=i(k,c,d,e,a[l+7],10,1126891415),e=i(e,k,c,d,a[l+14],15,-1416354905),d=i(d,e,k,c,a[l+5],21,-57434055),c=i(c,d,e,k,a[l+12],6,1700485571),k=i(k,c,d,e,a[l+3],10,-1894986606),e=i(e,k,c,d,a[l+10],15,-1051523),d=i(d,e,k,c,a[l+1],21,-2054922799),c=i(c,d,e,k,a[l+8],6,1873313359),k=i(k,c,d,e,a[l+15],10,-30611744),e=i(e,k,c,d,a[l+6],15,-1560198380),d=i(d,e,k,c,a[l+13],21,1309151649),c=i(c,d,e,k,a[l+4],6,-145523070),k=i(k,c,d,e,a[l+11],10,-1120210379),e=i(e,k,c,d,a[l+2],15,718787259),d=i(d,e,k,c,a[l+9],21,-343485551),c=j(c,m),d=j(d,n),e=j(e,p),k=j(k,q)}return o(c,d,e,k)}function e(a,b,c,d,e,f){return j(k(j(j(b,a),j(d,f)),e),c)}function f(a,b,c,d,f,g,h){return e(b&c|~b&d,a,b,f,g,h)}function g(a,b,c,d,f,g,h){return e(b&d|c&~d,a,b,f,g,h)}function h(a,b,c,d,f,g,h){return e(b^c^d,a,b,f,g,h)}function i(a,b,c,d,f,g,h){return e(c^(b|~d),a,b,f,g,h)}function j(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function k(a,b){return a<<b|a>>>32-b}function l(a){for(var b=o(),c=(1<<p)-1,d=0;d<a.length*p;d+=p)b[d>>5]|=(a.charCodeAt(d/p)&c)<<d%32;return b}function m(a){for(var b=n?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}var n=0,p=8;return{encrypt:function(a){return arguments.length>1&&(a=o.prototype.slice.call(arguments,0).join("")),m(d(l(a),a.length*p))}}}),D("Config",function(a,b,c){function d(){g.setGuid(this);var a={name$config:{},name$formatted:{}};h.set(this,a)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=new g;d.prototype={constructor:d,set:function(a,b){function c(a,b){var c;return a in f?(c=f[a],c=e.Object.isPlain(c)?e.Object.extend(c,b):f[a]=b):c=f[a]=b,g[a]=!1,c}var d=h.get(this),f=d.name$config,g=d.name$formatted;"object"==typeof a?e.Object.each(a,function(a,b){c(a,b)}):c(a,b)},get:function(a){var c=h.get(this),d=c.name$config,f=c.name$formatted;"object"==typeof a&&(a=a.id);var g=d[a];if(!e.Object.isPlain(g))return g;if("Url"==a)return g;var i=f[a];if(!i){var j=b.require("Url");g=j.format(g),d[a]=g,f[a]=!0}return g},clone:function(a,b,c,d){var f=this.get(a),g=[].slice.call(arguments,1);return g=[{},f].concat(g),e.Object.extendDeeply.apply(null,g)}};var i=a("Defaults");return e.Object.extend(d,{get:i.get,set:i.set,clone:i.clone})}),D("Defaults",function(a,b,c){function d(b){if(!g[b]){if(!f){var c=a("Config");f=new c}var d=a(b+".defaults"),h=a(b+".config"),i=e.Object.extend({},d,h);f.set(b,i),g[b]=!0}}var e=a("$"),f=null,g={};b.exports=c={set:function(a,b){"object"==typeof a?e.Object.each(a,function(a,b){d(a),f.set(a,b)}):(d(a),f.set(a,b))},get:function(a){return"object"==typeof a&&(a=a.id),d(a),f.get(a)},clone:function(a,b,d,f){var g=c.get(a),h=[].slice.call(arguments,1);return h=[{},g].concat(h),e.Object.extendDeeply.apply(null,h)}}}),D("Config/Url",function(a,b,c){function d(b){var c=a("Url");return e.Object.map(b,function(a,b){return"string"==typeof b?c.format(b):b instanceof o?e.Array.keep(b,function(a,b){return"string"==typeof a?c.format(a):"object"==typeof a?d(a):a},!0):b},!0)}var e=a("$");return{format:d}}),D("Edition",function(a,b,c){var d=(a("$"),"debug");return{get:function(){return d},set:function(a){d=a}}}),D("File",function(a,b,c){function d(a){if(!a||"string"!=typeof a)return"";var b=a.split(".");if(b.length<2)return"";var c=b.slice(-1)[0];return"."+c}function e(a,b){return"string"!=typeof a||"string"!=typeof b?!1:a.slice(0-b.length).toLowerCase()==b.toLowerCase()}function f(a){return e(a,".js")}function g(a){return e(a,".css")}function h(a){return e(a,".json")}return{ext:d,is:e,isJs:f,isCss:g,isJson:h}}),D("Fn",function(a,b,c){var d=a("$");b.exports=c={delay:function(a,b,c){if(b){if(a===!1||null==a)return void b.apply(null,c);var e="number"==typeof a?a:d.Math.randomInt(a.min,a.max);return l(function(){b.apply(null,c)},e)}}}}),D("JSON",function(a,b,c){var e=d.JSON;b.exports=c={parse:function(a){try{return e.parse(a)}catch(b){}try{return a=a.replace(/^(\r\n)+/g,""),new s("return "+a)()}catch(b){}return null},stringify:function(a,b){return b===B&&(b=4),e.stringify(a,null,b)}}}),D("LocalStorage",function(a,b,c){function d(a,c){h.setGuid(this),c=i.clone(b.id,c);var d=c.name;if(!d)throw new r("请先配置 name 字段");var e=l[d];e||(e=l[d]={});var f={id:a,data:e[a],app:e};j.set(this,f)}var e=a("$"),f=a("MiniQuery"),g=f.require("LocalStorage"),h=f.require("Mapper"),i=a("Config"),j=new h,k="KISP.LocalStorage.B81138B047FC",l=g.get(k)||{};return d.prototype={constructor:d,set:function(a,b){var c=j.get(this),d=c.data,f=c.app,h=c.id;d||(d=f[h]=c.data={}),"object"==typeof a?e.Object.extend(d,a):d[a]=b,g.set(k,l)},get:function(a){var b=j.get(this),c=b.data;return c?0==arguments.length?c:c[a]:void 0},remove:function(a){var b=j.get(this),c=b.data;c&&(delete c[a],g.set(k,l))},clear:function(){var a=j.get(this),b=a.id,c=a.app;delete c[b],a.data=null,g.set(k,l)},each:function(a){var b=j.get(this),c=b.data;if(c&&a)for(var d in c)a(d,c[d])},length:function(){return this.keys().length},keys:function(){var a=j.get(this),b=a.data;if(!b)return[];if("function"==typeof v.keys)return v.keys(b);var c=[];for(var d in b)c.push(d);return c},key:function(a){return this.keys()[a]},length:function(){return this.keys().length}},d}),D("Mapper",function(a,b,c){var d=a("$"),e=a("MiniQuery"),f=e.require("Mapper"),g=new f;return{get:function(a){return g.get(a)},set:function(a,b){g.set(a,b)},setGuid:function(a,b){var c=b.id;c=c+"-"+d.String.random(),f.setGuid(a,c)},remove:function(a){g.remove(a)}}}),D("Module",function(a,b,c){var d=a("MiniQuery"),e=d.require("Module"),f=a("Config"),g=f.get(b),h=new e(g);return{define:h.define.bind(h),require:h.require.bind(h),modules:h.modules.bind(h),tree:h.tree.bind(h)}}),D("RandomId",function(a,b,c){var d=a("$");b.exports=c={get:function(a,b,c,e){var f=[].slice.call(arguments);return f=d.Array.keep(f,function(a,b){return"number"==typeof a?d.String.random(a).toLowerCase():a}),f.join("")}}}),D("SessionStorage",function(a,b,c){function d(a,c){h.setGuid(this),c=i.clone(b.id,c);var d=c.name;if(!d)throw new r("请先配置 name 字段");var e=l[d];e||(e=l[d]={});var f={id:a,data:e[a],app:e};j.set(this,f)}var e=a("$"),f=a("MiniQuery"),g=f.require("SessionStorage"),h=f.require("Mapper"),i=a("Config"),j=new h,k="KISP.SessionStorage.B81138B047FC",l=g.get(k)||{};return d.prototype={constructor:d,set:function(a,b){var c=j.get(this),d=c.data,f=c.app,h=c.id;d||(d=f[h]=c.data={}),"object"==typeof a?e.Object.extend(d,a):d[a]=b,g.set(k,l)},get:function(a){var b=j.get(this),c=b.data;return c?0==arguments.length?c:c[a]:void 0},remove:function(a){var b=j.get(this),c=b.data;c&&(delete c[a],g.set(k,l))},clear:function(){var a=j.get(this),b=a.id,c=a.app;delete c[b],a.data=null,g.set(k,l)},each:function(a){var b=j.get(this),c=b.data;if(c&&a)for(var d in c)a(d,c[d])},length:function(){return this.keys().length},keys:function(){var a=j.get(this),b=a.data;if(!b)return[];if("function"==typeof v.keys)return v.keys(b);var c=[];for(var d in b)c.push(d);return c},key:function(a){return this.keys()[a]},length:function(){return this.keys().length}},d}),D("Style",function(a,b,c){function d(a){var b=typeof a;return"number"==b||/^\d+$/g.test(a)?a+"px":a}var e=a("$"),f=a("MiniQuery"),g=(f.require("Mapper"),a("Config"),["border","border-radius","border-bottom-width","border-left-width","border-right-width","border-top-width","border-width","bottom","font-size","height","left","letter-spacing","line-height","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top","right","top","width"]);g.concat([]);b.exports=c={pixelize:function(a,b){if("object"!=typeof a)return d(a);if(b instanceof o)e.Array.each(b,function(b,c){var e=a[b];null!=e&&(a[b]=d(e))});else{var c=a[b];null!=c&&(a[b]=d(c))}return a},checkUnit:function(a,b){return"string"==typeof a&&a.slice(0-b.length)==b},filter:function(a,b){a instanceof o||(a=[a]);var d=e.Array.map(a,function(a,c){return a&&"object"==typeof a?a=e.Object.filter(a,b):null});d=[{}].concat(d);var f=e.Object.extend.apply(null,d);return f=c.pixelize(f,g)},parse:function(a){},stringify:function(a,b,c){if(!a)return"";"number"==typeof b&&(c=b,b=null);var d=[];return e.Object.each(a,function(a,e){if(e=b?b(a,e):e,e!==B){var f=a+": "+e;c&&(f=new o(c+1).join(" ")+f),d.push(f)}}),0==d.length?"":c?d.join(";\n")+";\n":d.join(";")+";"},parsePercent:function(a,b){return a=parseInt(a)/100,a*b+"px"}}}),D("Url",function(a,b,c){function d(){var d=a("Config"),e=d.get(b.id),f={},g=e.replacer;if(!g)return f;var h=g.root;if(h&&(f[h]=c.root()),h=g.edition){var i=a("Edition");f[h]=i.get()}return f}var f=a("$"),g="",h="",i="";b.exports=c={root:function(){if(!g){var c=a("Config"),d=c.get(b.id);g=d.root,"function"==typeof g&&(g=g())}return g},checkFull:function(a){return"string"!=typeof a?!1:0==a.indexOf("http://")||0==a.indexOf("https://")},format:function(a,b){if("object"!=typeof b){var c=[].slice.call(arguments,1);b=f.Array.toObject(c),delete b.length}var e=d();return b=b?f.Object.extend(b,e):e,f.String.format(a,b)},get:function(){if(h)return h;var c=a("Config"),d=c.get(b.id),g=d.id,i=null;if(g&&(i=e.getElementById(g)),!i){var j=a("Edition"),k=j.get(),l=f.String.format('script[src*="kisp.{0}.js"]',k);i=f(l).get(0)}return h=i.src},dir:function(){if(i)return i;var a=c.get();return i=a.split("/").slice(0,-1).join("/")+"/"}}}),D("API",function(a,b,c){function d(a,c){function d(a,b,d){a=m.status=a||m.status,b=m.args=b||m.args,d=d||m.emitter,i.delay(c.delay,function(){m.xhr=null,d.fire("response",b),"success"==a?d.fire("code",f,b):"fail"==a&&d.fire("code",b[0],b);var c=b.slice(-1)[0];c&&d.fire("status",c.status,b),d.fire(a,b),d.fire("done",b)})}a=a||"",c=h.clone(b.id,c),j.setGuid(this,b);var e=new g(this),f=c.successCode,k=c.proxy;k&&"object"==typeof k&&(k=k[a]),k===!0&&(k=a+".js");var l={name:a,data:c.data,query:c.query,url:c.url,prefix:c.prefix,ext:c.ext,random:c.random,successCode:f,field:c.field,proxy:k,serialize:c.serialize,timeout:c.timeout,success:function(a,b,c){d("success",[a,b,c])},fail:function(a,b,c,e){d("fail",[a,b,c,e])},error:function(a){return m.aborted?void(m.aborted=!1):void d("error",[a])},ontimeout:function(a){d("timeout",[a])}},m={ajax:l,status:"",args:[],emitter:e,xhr:null,aborted:!1,fireEvent:d};j.set(this,m)}var e=a("$"),f=a("MiniQuery"),g=f.require("Emitter"),h=a("Config"),i=a("Fn"),j=a("Mapper");return d.prototype={constructor:d,get:function(a){var c=j.get(this),d=c.emitter;c.aborted=!1;var f=e.Object.extend({},c.ajax);a&&(f.data=a),a=f.data,d.fire("request","get",[a]),d.fire("request",["get",a]);var g=b.require("Ajax");return c.xhr=g.get(f),this},post:function(a,c){var d=j.get(this),f=d.emitter,g=d.ajax;d.aborted=!1;var h=e.Object.extend({},g,{data:a||g.data,query:c||g.query});a=h.data,c=h.query,f.fire("request","post",[a,c]),f.fire("request",["post",a,c]);var i=b.require("Ajax");return d.xhr=i.post(h),this},abort:function(){var a=j.get(this),b=a.xhr;b&&(a.aborted=!0,b.abort(),a.emitter.fire("abort"))},on:function(a,b){var c=j.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e);var f=c.status;if(f){var h=new g(this);h.on.apply(h,e),c.fireEvent(f,c.args,h),h.destroy()}return this},off:function(a,b){var c=j.get(this),d=c.emitter,e=[].slice.call(arguments,0);return d.off.apply(d,e),this},destroy:function(){var a=j.get(this),b=a.emitter;b.destroy(),j.remove(this)}},d}),D("API/Ajax",function(a,b,c){function d(b,c){var d=c.proxy;if(d){var g=a("Proxy");return g.request(d,c),null}var h=[c.url,c.prefix,c.name,c.ext].join(""),i=c.data||null;if(i){var j=c.serialize;i=e.Object.map(i,function(a,b){return"object"==typeof b&&b?j(a,b):b})}var k=f.require("Url"),m=c.random;if(m&&(m="rd_"+e.String.random(16),h=k.addQueryString(h,m,"")),"post"==b){var n=c.query;n&&(h=k.addQueryString(h,n)),i&&(i=e.Object.toQueryString(i))}else i&&(h=k.addQueryString(h,i),i=null);var o=!1,p=null,q=c.timeout||0;q>0&&(p=l(function(){o=!0,r.abort();var a=c.ontimeout;a&&a(r)},q));var r=new XMLHttpRequest;return r.open(b,h,!0),r.onreadystatechange=function(){if(!o&&4==r.readyState){clearTimeout(p);var b=c.successCode,d=c.error;if(200!=r.status)return void(d&&d(r));var e=a("JSON"),f=e.parse(r.responseText);if(!f)return void(d&&d(r));var g=c.field,h=f[g.code];if(h==b){var i=c.success,j=g.data in f?f[g.data]:{};i&&i(j,f,r)}else{var k=c.fail;k&&k(h,f[g.msg],f,r)}}},"post"==b&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(i),r}var e=a("$"),f=a("MiniQuery");return{get:function(a){return d("get",a)},post:function(a){return d("post",a)}}}),D("CloudAPI",function(a,b,c){function d(a,c){c=f.clone(b.id,c);var d=c.prefix+a,h=c.token;"function"==typeof h&&(h=h());var i=c.encrypted,k=e.Object.remove(c,["prefix","token","encrpy"]),l=new g("",k),m=l.post.bind(l),n={eid:c.eid,openid:c.openid,appid:c.appid};return l.post=function(a){a=a||null;var b={apiToken:h,encrypted:i?"Y":"N",method:d,data:a};m(b,n),c.console&&j.log(d,a)},l}var e=a("$"),f=a("Config"),g=a("API");return d}),D("SSH",function(a,b,c){function d(a,c){function d(a,b,c){m.api=null,a=m.status=a||m.status,b=m.args=b||m.args,c=c||m.emitter,c.fire("response",b),"success"==a?c.fire("code",i,b):"fail"==a&&c.fire("code",b[0],b.slice(1));var d=b.slice(-1)[0];d&&c.fire("status",d.status,b),c.fire(a,b),c.fire("done",b)}a=a||"",c=h.clone(b.id,c),k.setGuid(this,b);var f=new g(this),i=c.successCode,j=c.proxy;j&&"object"==typeof j&&(j=j[a]);var l=e.Object.filter(c,["ext","successCode","field","prefix","serialize","timeout","eid","openid","appid","netid","pubacckey","timestamp","nonce","pubaccid","data"]);l=e.Object.extend(l,{name:a,proxy:j,success:function(a,b,c){d("success",[a,b,c])},fail:function(a,b,c,e){d("fail",[a,b,c,e])},error:function(a){d("error",[a])},ontimeout:function(a){d("timeout",[a])},abort:function(){f.fire("abort")}});var m={ajax:l,console:c.console,status:"",args:[],emitter:f,api:null,fireEvent:d};k.set(this,m)}var e=a("$"),f=a("MiniQuery"),g=f.require("Emitter"),h=a("Config"),i=a("API"),k=a("Mapper");return d.prototype=e.Object.extend(new i,{constructor:d,post:function(a){var c=k.get(this),d=c.emitter,f=c.ajax;d.fire("request",["post",a||f.data]);var g=b.require("Server");return g.get({data:{eid:f.eid,appid:f.appid,netid:f.netid},success:function(d){var g=e.Object.extend({},f,{data:a||f.data,secret:d.secret,version:d.version,fromTag:d.fromTag,url:d.url,netid:d.netid});if(c.console){var h=f.prefix+f.name;j.log(h,g.data)}var i=b.require("Ajax");c.api=i.post(g)},fail:function(a,b,c,e){if(302==a){var g=c.NetIDList||[];return void d.fire("servers",[g,c,e])}var h=f.fail;h&&h(a,b,c,e)},error:f.error}),this},abort:function(){var a=k.get(this),b=a.api;b&&b.abort()}}),e.Object.extend(d,{setServer:function(a){var c=b.require("Server");c.set(a)}})}),D("SSH/Ajax",function(a,b,c){function d(b){var c=a("MD5"),d=b.prefix+b.name,f=b.eid,g=b.openid,h=e.Date.format(new q,"yyyy-MM-dd HH:mm:ss"),i=e.String.random(16),j={EID:f,Openid:g,Method:d,Timestamp:h,Ver:b.version,FromTag:b.fromTag,AppID:b.appid,NetID:b.netid,IsNewJson:"Y",IsEncrypt:"N",Sign:c.encrypt(f,b.secret,d,h,i),State:i,CustData:b.data},k={eid:f,openid:b.openid,pubacckey:b.pubacckey,timestamp:b.timestamp,nonce:b.nonce,pubaccid:b.pubaccid},l=a("API"),m=e.Object.filter(b,["ext","successCode","field","url","proxy","serialize","timeout"]),n=new l("",m),o=e.Object.filter(b,["success","fail","error","abort"]);return o.timeout=b.ontimeout,n.on(o),n.post(j,k),n}var e=a("$");a("MiniQuery");return{post:d}}),D("SSH/Server",function(a,b,c){function d(){if(l||l===!1)return l;var c=k.cache;if("session"==c||"local"==c){c=c[0].toUpperCase()+c.slice(1)+"Storage";var d=a(c);l=new d(b.id,{name:"KISP"})}else l=!1;return l}function e(c,d,e,g,h){d=d||{url:"",secret:"",key:"",route:"",version:"",fromTag:""};var k=a("API"),l=a("MD5"),m=c.eid,o=c.netid,p=d.secret,r=i.Date.format(new q,"yyyy-MM-dd HH:mm:ss"),s=i.String.random(16),t=l.encrypt(m,p,r,s),u=j.clone(b.id,{url:d.url}),v=new k("",u);v.get({EID:m,AppID:c.appid,NetID:o,AccKey:d.key,Timestamp:r,State:s,Sign:t}),v.on("success",function(a,b,c){var g=n.server={AppSecret:b.AppSecret,ServerUrl:b.ServerUrl,NetID:b.NetID||o};f(d,g,e)}),v.on("fail",function(a,b,c,d){g&&g(a,b,c)}),v.on("error",function(a){h&&h()})}function f(b,c,e){var f=a("Url"),g=c.ServerUrl||"";f.checkFull(g)||(g="http://"+g);var h=c.NetID||"",i={secret:c.AppSecret,version:b.version,fromTag:b.fromTag,url:g+b.route,netid:h};m=[i];var j=d();j&&j.set("args",m),e&&e.apply(null,m)}function g(a){var c=a.data,g=a.success,h=a.fail,i=a.error,j=k.cache;if(j&&m)return void g.apply(null,m);var l=d();if(l&&(m=l.get("args")))return void g.apply(null,m);var o=b.require("Config");o.get(function(a){if(!a)return void(i&&i());n.config=a;var b=n.server;return b?void f(a,b,g):void e(c,a,g,h,i)})}function h(a){n.server=a;var b=n.config;b&&f(b,a)}var i=a("$"),j=(a("MiniQuery"),a("Config")),k=j.get(b.id),l=null,m=null,n={config:null,server:null};return{get:g,set:h}}),D("SSH/Server/Config",function(a,b,c){function d(){if(null!==k)return k;var c=i.get(b.id),d=c.cache;if("session"==d||"local"==d){d=d[0].toUpperCase()+d.slice(1);var e=a(d+"Storage");return k=new e(b.id,{name:"KISP"})}return k=!1}function e(a){var c=i.get(b.id),e=c.url;g.getJSON(e,function(b){try{var e=c.host||b.kisplusServerS,f=b.kisplusAppsecret;j={version:b.ver,fromTag:b.fromtag,key:b.AccKey,secret:b.AccSecret,host:e,path:f,route:b.kisplusApiRouter,url:e+f};var g=d();g&&g.set(j)}catch(h){j=null}a&&a(j),c.cache||(j=null)})}function f(a){var c=i.get(b.id),f=c.cache;if(f&&j)return void a(j);var g=d();return g&&(j=g.get())?void a(j):void e(a)}var g=a("$"),h=a("MiniQuery"),i=(h.require("Emitter"),a("Config")),j=null,k=null;return{get:f}}),D("SSH.API",function(a,b,c){function d(a,c){function d(a,b,c){o.ssh=null,a=o.status=a||o.status,b=o.args=b||o.args,c=c||o.emitter,c.fire("response",b),"success"==a?c.fire("code",i,b):"fail"==a&&c.fire("code",b[0],b.slice(1));var d=b.slice(-1)[0];d&&c.fire("status",d.status,b),c.fire(a,b),c.fire("done",b)}a=a||"",c=h.clone(b.id,c),j.setGuid(this,b);var f=(c.prefix,new g(this)),i=c.successCode,l=c.proxy;l&&"object"==typeof l&&(l=l[a]),l===!0&&(l=a+".js");var m=e.Object.extend(e.Object.filter(c,["prefix","eid","openid","serialize","timeout","appid","netid","pubacckey","timestamp","nonce","pubaccid"]),{proxy:l}),n={name:a,successCode:i,field:c.field,data:c.data,ssh:e.Object.extend(m,c.ssh),success:function(a,b,c){d("success",[a,b,c])},fail:function(a,b,c,e){d("fail",[a,b,c,e])},error:function(a,b,e,f){b=b||c.msg,d("error",[a,b,e,f])},timeout:function(a){d("timeout",[a])},abort:function(){f.fire("abort")},servers:function(a){k.fire("servers",[a])}},o={ajax:n,status:"",args:[],emitter:f,ssh:null,fireEvent:d};j.set(this,o)}var e=a("$"),f=a("MiniQuery"),g=f.require("Emitter"),h=a("Config"),i=a("SSH"),j=a("Mapper"),k=new g(d);return d.prototype=e.Object.extend(new i,{constructor:d,get:function(){throw new r(b.id+" 不支持 get 方式的请求")},post:function(a){var c=j.get(this),d=c.emitter,f=c.ajax,g=e.Object.extend({},f,{data:a||f.data||{}});d.fire("request",["post",g.data]);var h=b.require("Ajax");return c.ssh=h.post(g),this},abort:function(){var a=j.get(this),b=a.ssh;b&&b.abort()}}),e.Object.extend(d,{setServer:function(a){i.setServer(a)},on:k.on.bind(k)})}),D("SSH.API/Ajax",function(a,b,c){function d(b){var c=a("SSH"),d=new c(b.name,b.ssh),f=b.success,g=b.fail,h=b.error,i=b.field;d.on({success:function(a,c,d){a||h&&h(d);var e=b.successCode,j=a[i.code];j==e?f&&f(a[i.data]||{},a,d):g&&g(j,a[i.msg],a,d)},fail:function(a,b,c,d){h&&h(a,b,c,d)},error:function(a){h&&h(B,B,B,a)},timeout:b.timeout,abort:b.abort,servers:b.servers});var j=b.data;return d.post({openid:b.ssh.openid,Result:"",ErrMsg:"",AccountDB:"",TotalPage:"",CurrentPage:j.pageNo,ItemsOfPage:j.pageSize,Data:e.Object.remove(j,["pageNo","pageSize"])}),d}var e=a("$");a("MiniQuery");return{post:d}}),D("Proxy",function(a,b,c){function d(a){var c=i.get(b.id),d=c.delay,e=[].slice.call(arguments,1);j.delay(d,a,e)}function e(a,c){var d=b.require("Url"),e=d.get(a),f=h.require("Script");f.load(e,function(){var a=k;k=null,"function"==typeof a&&(a=a(c.data,c)),g(a,c)})}function f(c,e){var f=b.require("Url"),h=f.get(c),i=new XMLHttpRequest;i.open("get",h,!0),i.onreadystatechange=function(){if(4==i.readyState){if(200!=i.status)return void d(e.error);var b=a("JSON"),c=b.parse(i.responseText);g(c,e)}},i.send(null)}function g(a,b){if(!a)return void d(b.error);var c=b.successCode,e=b.field,f=a[e.code];if(f==c){var g=a[e.data]||{};d(b.success,g,a)}else{var h=a[e.msg]||"";d(b.fail,f,h,a)}}var h=(a("$"),a("MiniQuery")),i=a("Config"),j=a("Fn"),k=null;b.exports=c={request:function(b,c){var d=a("File");if(d.isJs(b))return void e(b,c);if(d.isJson(b))return void f(b,c);throw new r("不支持参数 file 的文件类型: "+b)},response:function(a){k=a}}}),D("Proxy/Url",function(a,b,c){function d(a){if(h.checkFull(a))return a;var c=f.get(b.parent.id),d=c.base;if(h.checkFull(d))return d+a;var e=h.root();return"/"!=a.slice(0,1)&&(e+=d),e+a}var e=(a("$"),a("MiniQuery")),f=a("Config"),g=e.require("Url"),h=a("Url");return{get:function(a){return a=d(a),g.randomQueryString(a)}}}),D("CloudHome/Native",function(a,b,c){var f=0,g={};return d.XuntongJSBridge={handleMessageFromXT:function(a,b){var c=g[a];c&&c(b||{})}},{invoke:function(a,b,c){"function"==typeof b&&(c=b,b=null),b=n.stringify(b||{}),b=encodeURIComponent(b);var d=c?++f:0;d&&(g[d]=c);var h=["xuntong",a,d,b].join(":"),i=e.createElement("iframe");i.setAttribute("height","1px"),i.setAttribute("width","1px"),i.setAttribute("src",h),e.documentElement.appendChild(i),i.parentNode.removeChild(i),i=null}}}),D("CloudHome.API",function(a,b,c){function d(a,c){f.setGuid(this),a=a||"",c=h.clone(b.id,c);var d=new g(this),e=c.delay,k={name:a,field:c.field,status:"",args:[],emitter:d,fireEvent:function(a,b,c){a=k.status=a||k.status,b=k.args=b||k.args,c=c||k.emitter,i.delay(e,function(){"fail"==a&&c.fire("code",b[0],b),c.fire(a,b),c.fire("done",b)})}};j.set(this,k)}var e=(a("$"),a("MiniQuery")),f=e.require("Mapper"),g=e.require("Emitter"),h=a("Config"),i=a("Fn"),j=new f;return d.prototype={constructor:d,invoke:function(b){var c=j.get(this),d=c.name,e=c.field,f=a("CloudHome");return f.invoke(d,b,function(a){var b=a[e.success];if(b="true"==x(b).toLowerCase()){var d=a[e.data]||{};return void c.fireEvent("success",[d,a])}var f=a[e.code],g=a[e.msg];c.fireEvent("fail",[f,g,a])}),this},on:function(a,b){var c=j.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e);var f=c.status;if(f){var h=new g(this);h.on.apply(h,e),c.fireEvent(f,c.args,h),h.destroy()}return this},off:function(a,b){var c=j.get(this),d=c.emitter,e=[].slice.call(arguments,0);return d.off.apply(d,e),this},destroy:function(){var a=j.get(this),b=a.emitter;b.destroy(),j.remove(this)}},d}),D("CloudHome",function(a,b,c){var e=(a("$"),a("MiniQuery")),f=e.require("Url"),h=b.require("Native");b.exports=c={invoke:h.invoke,check:function(a){if(a){var b=/Qing\/.*;(iPhone|Android).*/;return g.userAgent.match(b)?!0:!1}return!!f.hasQueryString(d,"ticket")},close:function(){h.invoke("close")},shareWechat:function(b){var c=a("CloudHome.API"),d=new c("socialShare"),e=b.success;e&&d.on("success",e);var f=b.fail;f&&d.on("fail",f),d.invoke({shareWay:"wechat",shareType:3,shareContent:{title:b.title,description:b.content,thumbData:b.icon,webpageUrl:b.url}})},setTitle:function(b){var c=a("CloudHome.Title");b===!0?c.show():b===!1?c.hide():b||""===b?c.set(b):c.show()}}}),D("CloudHome.Title",function(a,b,c){var d=(a("$"),a("MiniQuery"),e.title),f=!1;b.exports=c={set:function(b){d=b,e.title=b;var c=a("CloudHome");c.invoke("setWebViewTitle",{title:b}),f=!0},show:function(){c.set(d)},hide:function(){d=e.title;var b=a("CloudHome");b.invoke("hideWebViewTitle"),f=!1},toggle:function(a){a?c.show():c.hide()}}}),D("ImageReader/Renderer",function(a,b,c){function d(a){var b=a.emitter,c=a.loading;c===!0?c=KISP.create("Loading",{text:"读取中..."}):"string"==typeof c&&(c=KISP.create("Loading",{text:c})),g(a.input).on("change",function(a){var d=this,e=d.files[0];if(!e)return void b.fire("cancel");var f=e.type;if(0!=f.indexOf("image/"))return void b.fire("fail",[201,"所选择的文件类型不是图片",{img:e}]);var g=new FileReader;g.onload=function(a){c&&c.hide();var d=a.target.result;b.fire("success",[d])},c&&c.show(),g.readAsDataURL(e)})}function e(b,c){var d=b.emitter;g(b.input).on("click",function(b){b.preventDefault();var e=a("CloudHome.API"),f=new e("selectPic");f.on("success",function(a,b){var c,e;try{c=a.fileExt,e=a.fileData.replace(/[\r\n]/g,"")}catch(f){var g="无法读取图片，云之家接口有问题: "+f.message;return void d.fire("fail",[500,g,b])}var h="data:image/"+c+";base64,"+e;d.fire("success",[h])}),f.on("fail",function(a,b,c){return 1==a?void d.fire("cancel"):void d.fire("fail",[a,b,c])}),f.invoke(c)})}var f,g=a("$");return{render:function(b,c){if(f===B){var g=a("CloudHome");f=g.check()}f?e(b,c):d(b)}}}),D("ImageReader",function(a,b,c){function d(a,c){h.setGuid(this),e.Object.isPlain(a)&&(c=a,a=c.el,delete c.el),c=i.clone(b.id,c);var d={emitter:new g(this),input:a,loading:c.loading};k.set(this,d)}var e=a("$"),f=a("MiniQuery"),g=f.require("Emitter"),h=f.require("Mapper"),i=a("Config"),j=b.require("Renderer"),k=new h;return d.prototype={constructor:d,render:function(a){var b=k.get(this);j.render(b,a)},on:function(a,b){var c=k.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)}},d}),D("WeChat/JsApiList",function(a,b,c){function d(a,b){if(b instanceof o)return b;var c=v.keys(a);return"*"==b?c:[]}a("$"),a("MiniQuery");b.exports=c={get:d}}),D("WeChat/Lib",function(a,b,c){function e(a,b){if(g)return void(b&&b(g));var c=f.require("Script");c.load(a,function(){g=d.wx,b&&b(g)})}var f=(a("$"),a("MiniQuery")),g=d.wx;b.exports=c={load:e}}),D("WeChat/Signature",function(a,b,c){function d(a,c){var d=new g(h.name,{url:h.url});d.on("success",function(a,b){c&&c(a)}),d.on("fail",function(a,b,c){j.dir(c)}),d.on("error",function(){j.log(b.id+": ajax error")}),d.get({eid:a.eid,url:a.url,timestamp:a.timestamp,noncestr:a.noncestr})}function e(a,c){h=h||f.clone(b.id),d(a,function(b){c&&c({timestamp:a.timestamp,noncestr:a.noncestr,url:a.url,signature:b})})}var f=(a("$"),a("MiniQuery"),a("Config")),g=a("API"),h=null;b.exports=c={get:e}}),D("WeChat",function(a,b,c){var d=a("$"),e=a("MiniQuery"),f=a("Config"),g=e.require("Emitter"),h=e.require("Url"),i=new g,j="",k=null,m=null;b.exports=c={init:function(a){function d(b,f){return b&&f?(b.config({debug:a.debug,appId:a.appid,timestamp:f.timestamp,nonceStr:f.noncestr,signature:f.signature,jsApiList:e.get(b,a.apis)}),b.ready(function(){j="ready",i.fire("ready",[b])}),void b.error(function(d){42001==d.code&&a.retryAfterExpired?c.init(a):(j="error",i.fire("error",[b]))})):(o++,void(5>o&&l(d,200)))}var e=b.require("JsApiList"),g=b.require("Lib"),h=b.require("Signature");a=m=f.clone(b.id,a);var n=null;g.load(a.js,function(a){k=a,d(a,n)}),h.get({eid:a.eid,url:a.url,timestamp:a.timestamp,noncestr:a.noncestr},function(a){n=a,d(k,a)});var o=0},on:function(a,b){var c=[].slice.call(arguments,0);if(!j)return void i.on.apply(i,c);var d=new g;d.on.apply(d,c),d.fire(j,[k]),d.destroy(),d=null},getLoginUrl:function(a,c,e){switch(arguments.length){case 1:if(!m)throw new r("当调用方式为 getLoginUrl(url) 时，请先调用 init() 方法以传入 eid 字段。");e=null,c=a,a=m.eid;break;case 2:if("object"==typeof c){if(e=c,c=a,a=e.eid||m.eid,!a)throw new r("当调用方式为 getLoginUrl(url, query) 时，请在参数 query 中指定 eid 字段，或先调用 init() 方法以传入 eid 字段。")}else e=null}e&&(c=h.addQueryString(c,e));var g=f.get(b.id),i=g.login,j=d.Object.extend({},i.data,{eid:a,from_url:c});return c=h.addQueryString(i.url,j)},share:function(a,b){c.on("ready",function(e){var f=b.link||b.url;f=c.getLoginUrl(f),b=d.Object.extend({},b,{link:f,imgUrl:b.imgUrl||b.icon}),b=d.Object.remove(b,["url","icon"]);var g="onMenuShare"+a,h=e[g];if("function"!=typeof h)throw new r("wx 对象中不存在方法: "+g);(h=h.bind(e))(b)})},invoke:function(a,b,d){c.on("ready",function(b){var c=b[a];if("function"!=typeof c)throw new r("wx 对象中不存在方法: "+a);var d=[].slice.call(arguments,1);c.apply(b,d)})}}}),D("App",function(a,b,c){function d(a,c){g.setGuid(this),c=h.clone(b.id,c);var d={name:a,mask:c.mask,animated:c.animated,slide:c.slide};j.set(this,d)}var f=(a("$"),a("MiniQuery")),g=f.require("Mapper"),h=a("Config"),i=b.require("Nav"),j=new g;return d.prototype={constructor:d,init:function(b){var c=a("jquery-plugin/touch")||a("$"),d=a("MiniQuery"),e=a("KISP"),f=a("Module"),g=f.define;g("$",function(){return c}),g("MiniQuery",function(){return d}),g("KISP",function(){return e;
});var h=j.get(this),i=h.name;g(i,b),f.require(i)},normal:function(a){this.init(function(b,c){var d=i.create(meta.mask);d.on("back",function(a,b){e.activeElement.blur(),a=c.require(a),b=c.require(b),a.hide(),b.show()}),d.on("before-to",function(a,b){a=c.require(a),a.hide()}),d.on("to",function(a,b,d,e){var f=[].slice.call(arguments,1),g=c.require(a);g.render.apply(g,f)}),a&&a(b,c,d)})},animate:function(c){var d=a("Mask"),f=b.require("Transition"),g=j.get(this);this.init(function(a,b){var h={},j=f.getEventName(),k=new d,m=i.create(),n={view$bind:{},enabled:!1,aborted:!1};m.on("before-to",function(a,c){if(!n.view$bind[c]){n.view$bind[c]=!0,c=b.require(c);var d=g.slide.k,f=e.body.clientWidth,h=0,i=0,j=0,l=0,o=!1,p=g.slide.width;1>p&&(p=f*p),c.$.on({touchstart:function(a){var b=a.originalEvent.touches[0];h=0,l=0,o=!1,n.enabled=!1,n.aborted=!1,i=b.pageX,j=b.pageY},touchmove:function(a){var e=a.originalEvent.touches[0];if(l=e.pageX-i,!(0>=l)){var g=t.abs(e.pageY-j);h=g/l;var n=null;if(!o){if(h>d)return;n=m.get(-2),n=b.require(n),n.$.css({"z-index":1}),c.$.css({"z-index":3}),c.$.css("transition","none"),n.show(),k.$.show(),k.$.css({"z-index":2,transition:"none"}),n.$.css({transition:"none",transform:"translateX(-75%)"}),k.$.removeClass("BeforeForward Forward BeforeBack Back"),o=!0}var p=.4*(1-l/f);k.$.css("opacity",p),c.$.css("transform","translateX("+l+"px)");var q=f*-.75+.8*l;n.$.css("transform","translateX("+q+"px)")}},touchend:function(a){if(o){o=!1,n.enabled=!0;var e=n.aborted=p>l||h>d,f=e?0:"100%";e||(m.back(),k.$.css({opacity:0,transition:"opacity 0.5s"})),c.$.removeClass("Forward"),c.$.css({transition:"transform 0.5s",transform:"translateX("+f+")"});var g=m.get(-2);g=b.require(g),g.$.data("animated",!1),g.$.css({transition:"transform 0.5s",transform:"translateX("+(e?"-75%":0)+")"})}}})}}),m.on("before-to",function(a,c){a=b.require(a),c=b.require(c),a.$.css({"z-index":1}),c.$.css({"z-index":3}),c.$.addClass("BeforeForward"),c.$.removeClass("Back"),c.$.show(),k.$.removeClass("BeforeBack Back Forward"),k.$.addClass("BeforeForward"),k.$.show(),l(function(){k.$.addClass("Forward"),c.$.addClass("Forward")},50)}),m.on("before-to",function(a,c){h[c]||(h[c]=!0,c=b.require(c),c.$.on(j,function(){var a=c.$.data("animated");if(c.$.data("animated",!0),a!==!1){var d=m.get(-2);d=b.require(d),n.enabled?(n.aborted?(c.$.addClass("Forward"),d.hide(),d.$.css("transform","translateX(0)")):c.hide(),c.$.css("transition",""),c.$.css("transform",""),n.enabled=!1):c.$.hasClass("Forward")?d.hide():c.$.hasClass("Back")&&c.hide(),k.$.hide()}}))}),m.on("back",function(a,c){n.enabled||(e.activeElement.blur(),a=b.require(a),c=b.require(c),c.$.css({"z-index":1}),a.$.css({"z-index":3}),c.show(),a.$.removeClass("Forward"),a.$.addClass("Back"),k.$.removeClass("BeforeForward Forward Back"),k.$.addClass("BeforeBack"),k.$.show(),l(function(){k.$.addClass("Back")},50))}),m.on("to",function(a,c,d,e){var f=[].slice.call(arguments,1),g=b.require(a);g.render.apply(g,f)}),k.render(),c&&c(a,b,m)})},launch:function(a){var b=j.get(this);b.animated?this.animate(a):this.normal(a)}},d}),D("App/Nav",function(a,b,c){function d(b){function c(){h.show()}var d=a("Navigator"),f=new d({hash:function(a){return[a,e.String.random(8)].join("-")}});if(b){var g=a("Mask"),h=new g({opacity:b.opacity,duration:b.duration,"z-index":b["z-index"]});h.render(),f.on({"before-to":c,back:c})}var i=f.to;return f.to=function(a,b,c,d){var e=[].slice.call(arguments);"string"==typeof a?(b=a,a=!1):e=e.slice(1),a?l(function(){i.apply(f,e)},a):i.apply(f,e)},f}var e=a("$");return{create:d}}),D("App/Transition",function(a,b,c){function d(){if(g)return g;var a=e.createElement("div");for(var b in f)if(a.style[b]!==B)return g=f[b]}var f=(a("$"),{transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}),g="";return{getEventName:d}}),D("CityPicker",function(a,b,c){function f(a){i.setGuid(this),a=k.clone(b.id,a);var c="iframe-"+g.String.random().toLowerCase();m[c]=this;var d={emitter:new j(this),dialog:null,id:c,cssClass:a.cssClass,height:a.height,width:a.width,mask:a.mask,sample:a.sample,title:a.title||""};l.set(this,d)}var g=a("$"),h=a("MiniQuery"),i=h.require("Mapper"),j=h.require("Emitter"),k=a("Config"),l=new i,m={};return d.addEventListener("message",function(a){var b=a.data;if(b&&"KISP.CityPicker"==b.from){var c=b.id;if(c){var d=m[c];if(d){var e=l.get(d),f=e.emitter,g=b.values,h=b.action;switch(h){case"ok":case"cancel":f.fire(h,[g]),d.hide();break;case"ready":f.fire(h,[g])}}}}}),f.prototype={constructor:f,show:function(){var b=l.get(this),c=b.dialog;if(!c){var d=a("Url"),e=a("Dialog");c=b.dialog=new e({cssClass:b.cssClass,height:b.height,width:b.width,mask:b.mask,text:g.String.format(b.sample,{id:b.id,dir:d.dir(),title:encodeURIComponent(b.title)})})}c.show()},hide:function(){var a=l.get(this),b=a.dialog;b&&b.hide()},on:function(a,b){var c=l.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=l.get(this);delete m[a.id];var b=a.emitter;this.remove(),b.destroy(),l.remove(this)},setValues:function(a){var b=l.get(this),c=b.id,d=e.getElementById(c);d.contentWindow.postMessage({method:"setValue",args:[a]},"*")}},f}),D("Alert",function(a,b,c){function d(a,c,d,g){if("object"==typeof a){var h=b.require("Sample");a=n.stringify(a,null,4),a=e.String.format(h,{text:a})}var i=[].slice.call(arguments,1),j=e.Array.findIndex(i,function(a,b){return"function"==typeof a});j>=0?(g=i[j],i=i.slice(0,j)):g=null,i=[a].concat(i),a=e.String.format.apply(null,i),f.add(a,g)}var e=a("$"),f=b.require("Dialog");return{show:d}}),D("Alert/Dialog",function(a,b,c){function d(){var b=j.clone("Alert"),c=a("Dialog"),d=new c({cssClass:"Alert","volatile":b["volatile"],mask:b.mask,autoClosed:b.autoClosed,width:b.width,"z-index":b["z-index"],buttons:[{name:"ok",text:b.button}]});return d.on("button","ok",function(){var a=d.data("fn");a&&a()}),d.on({show:function(){l=!0},hide:function(){l=!1;var a=m.shift();a&&g(a.text,a.fn)}}),i(e).on("keyup",function(a){if(13==a.keyCode){d.hide();var b=d.data("fn");b&&b()}}),d}function f(a){a=x(a);var b=i.String.getByteLength(a),c=t.max(b,125),d=e.documentElement.clientHeight;return c>=.8*d&&(c="80%"),c}function g(a,b){var c=f(a);k=k||d(),k.data("fn",b),k.set("text",a),k.set("height",c),k.show()}function h(a,b){return l?void m.push({text:a,fn:b}):void g(a,b)}var i=a("$"),j=a("Config"),k=null,l=!1,m=[];return{add:h}}),D("Alert/Sample",['<pre class="JSON">{text}</pre>'].join("\n")),D("Confirm",function(a,b,c){function d(){if(f)return f;var c=a("Config"),d=a("Dialog"),e=c.clone(b.id);return f=new d(e),f.on("button","ok",function(){var a=f.data("fn");a&&a()}),f}function e(a,b){f=d(),f.data("fn",b),f.set("text",a),f.show()}var f=null;return{show:e}}),D("Dialog",function(a,b,c){function e(a){p.setGuid(this,b),a=i.clone(b.id,a);var c=new h(this),e=a.cssClass;e instanceof o&&(e=e.join(" "));var g=a.buttons,l=a.eventName,n=a.prefix,q=a.suffix,r={id:j.get(n,q),articleId:j.get(n,"article-",q),contentId:j.get(n,"content-",q),footerId:j.get(n,"footer-",q),div:null,scrollable:a.scrollable,scroller:null,scrollerConfig:a.scroller,eventName:l,title:a.title,text:a.text,buttons:g,samples:k.get(a.sample),emitter:c,mask:a.mask,masker:null,layer:null,cssClass:e,style:m.get(a),autoClosed:a.autoClosed,visible:!1,"volatile":a["volatile"],zIndex:a["z-index"],data:{}};p.set(this,r),g&&g.length>0&&f.Array.each(g,function(a,b){var d=a.fn;if(d){var e=a.name||x(b);c.on(l,"button",e,d),c.on("button",e,d)}});var s=f.Object.filter(a,["width","height"]);f(d).on("resize",function(){var a=m.get(s);f(r.div).css(a)})}var f=a("$"),g=a("MiniQuery"),h=g.require("Emitter"),i=a("Config"),j=a("RandomId"),k=b.require("Sample"),m=b.require("Style"),n=b.require("Renderer"),p=a("Mapper");return e.prototype={constructor:e,$:null,render:function(){var b=p.get(this),c=b.div;if(!c){c=b.div=n.render(b,this),f(c).hide();var d=a("Mask"),e=b.zIndex;if(b.masker=new d({"z-index":e-1}),b["volatile"]){var g=this;b.masker.on("click",function(){g.hide()})}b.layer=new d({opacity:0,"z-index":e+1})}},show:function(b){var c=p.get(this);this.render();var d=a("Mask");b=d.filter(c.mask,b),b?c.masker.show(b):masker.hide(),c.layer.show({duration:200}),f(c.div).css(c.style),l(function(){f(c.div).show()},0),c.visible=!0,c.emitter.fire("show")},hide:function(){var a=p.get(this),b=a.div;if(b&&a.visible){var c=a.masker;c&&c.hide(),f(b).hide(),a.visible=!1,a.emitter.fire("hide")}},remove:function(){var a=p.get(this),b=a.div;if(b){var c=a.masker;c&&c.remove();var d=a.layer;d&&d.remove(),a.div=null,a.masker=null,a.layer=null,a.visible=!1,f(b).off(),b.parentNode.removeChild(b),a.emitter.fire("remove")}},on:function(a,b){var c=p.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=p.get(this);if(!a)throw new r("该实例已给销毁，无法再次调用 destroy 方法。");var b=a.emitter,c=a.scroller;this.remove(),b.destroy(),c&&c.destroy(),p.remove(this)},set:function(a,b){var c=p.get(this),d=c.scroller;switch(this.render(),a){case"text":f("#"+c.contentId).html(b),d&&d.refresh(200);break;case"height":case"width":var e={};e[a]=b,e=m.get(e),f.Object.extend(c.style,e),f(c.div).css(e),d&&d.refresh(300);break;default:throw new r("目前不支持设置属性: "+a)}},data:function(a,b){var c=p.get(this),d=c.data,e=arguments.length;return 0==e?d:f.Object.isPlain(a)?(f.Object.extend(d,a),a):1==e?d[a]:(d[a]=b,b)}},e}),D("Dialog/Sample/iOS",["#--div.begin--#",'<div id="{id}" class="KISP Dialog {cssClass}" style="{style}">',"","    #--header.begin--#",'    <header style="{style}">',"        {title}","    </header>","    #--header.end--#","",'    <article id="{article-id}" class="{no-header} {no-footer}">','        <div id="{content-id}">{text}</div>',"    </article>","","    #--footer.begin--#",'    <footer id="{id}" class="buttons-{count}">',"        #--button.begin--#",'        <span data-index="{index}" style="{style}">{text}</span>',"        #--button.end--#","    </footer>","    #--footer.end--#","</div>","#--div.end--#"].join("\n")),D("Dialog/Renderer",function(a,b,c){function d(a){if(!a)return"";var b=h.filter(a,["border-bottom","color","font-size","font-weight","width"]);return b=h.stringify(b)}function f(b,c){function f(a){var d=this,e=+d.getAttribute("data-index"),f=i[e],g=f.name||x(e);j.fire("click","button",g,[f,e]),j.fire("click","button",[f,e]),j.fire("button",g,[f,e]),j.fire("button",[f,e]);var h=f.autoClosed;h===B&&(h=b.autoClosed),h&&c.hide()}var i=b.buttons||[],j=b.emitter,k=b.id,l=b.articleId,m=b.footerId,n=b.style,o=b.samples,p=b.title;p&&"object"!=typeof p&&(p={text:p||""});var q=g.String.format(o.div,{id:k,"article-id":l,"content-id":b.contentId,cssClass:b.cssClass,style:h.stringify(n),text:b.text,"text-height":parseInt(n.height)-88-2,"no-header":p?"":"no-header","no-footer":i.length>0?"":"no-footer",header:function(a){return a?g.String.format(o.header,{style:d(a),title:a.text}):""}(p),footer:function(a){var b=a.length;return b?g.String.format(o.footer,{id:m,count:b,buttons:g.Array.keep(a,function(b,c){return"string"==typeof b&&(a[c]=b={text:b}),g.String.format(o.button,{index:c,text:b.text,style:d(b)})}).join("")}):""}(i)});g(e.body).prepend(q);var r=b.eventName,s=g("#"+l);if("touch"==r?s.touch(function(){j.fire("touch-main")}):s.on(r,function(){j.fire(r+"-main")}),b.scrollable){var t=a("Scroller"),u=new t(s.get(0),b.scrollerConfig);b.scroller=u}var v=g("#"+m);i.length>0&&("touch"==r?v.touch("[data-index]",f,"pressed"):(v.on(r,"[data-index]",f),v.on("mousedown","[data-index]",function(a){var b=this;g(b).addClass("pressed")}),v.on("mouseup mouseout","[data-index]",function(a){var b=this;g(b).removeClass("pressed")})));var w=e.getElementById(k);return c.$=g(w),w}var g=a("$"),h=a("Style");return{render:f}}),D("Dialog/Sample",function(a,b,c){function d(a){return a.replace(/\n|\r|\r\n/g," ").replace(/\s+/g," ")}function e(c){var e=a(b,c),g=f.String.getTemplates(e,[{name:"div",begin:"#--div.begin--#",end:"#--div.end--#",fn:d},{name:"header",begin:"#--header.begin--#",end:"#--header.end--#",outer:"{header}",fn:d},{name:"footer",begin:"#--footer.begin--#",end:"#--footer.end--#",outer:"{footer}",fn:d},{name:"button",begin:"#--button.begin--#",end:"#--button.end--#",outer:"{buttons}",fn:d}]);return g}var f=a("$");return{get:e}}),D("Dialog/Style",function(a,b,c){function d(a){var b=typeof a;return"number"==b?0-a/2+"px":"string"==b&&"px"==a.slice(-2)?(a=parseInt(a),0-a/2+"px"):void 0}function f(a){var b=g.filter(a,["background","border","border-radius","height","width","z-index","position"]);if("width"in b){var c=b.width;if("number"!=typeof c){var f=e.documentElement.clientWidth;g.checkUnit(c,"%")?b.width=g.parsePercent(c,f):c||(b.width=.8*f+"px")}}if("height"in b){var h=b.height;if("number"!=typeof h){var i=e.documentElement.clientHeight;g.checkUnit(h,"%")?b.height=g.parsePercent(h,i):h||(b.height=.8*i+"px")}}var j=d(b.width);return j&&(b["margin-left"]=j),j=d(b.height),j&&(b["margin-top"]=j),b}var g=(a("$"),a("Style"));return{get:f}}),D("ImageSlider",function(a,b,c){function d(a){i.setGuid(this,b),a=h.clone(b.id,a);var c={sample:a.sample,mask:e.Object.filter(a,["prefix","suffix","volatile","opacity","background"]),slider:null,emitter:new g(this),data:a.data};i.set(this,c)}var e=a("$"),f=a("MiniQuery"),g=f.require("Emitter"),h=a("Config"),i=(a("RandomId"),a("Mapper"));return d.prototype={constructor:d,show:function(b){var c=i.get(this),d=c.mask,f=c.slider,g=c.sample;b=c.data=b||c.data;var h=e.Array.keep(b,function(a,b){var c=e.String.format(g,{src:a});return{content:c}});if(f)return d.show(),void f.loadData(h);var j=c.emitter,k=a("Mask");d=c.mask=new k(d),d.on("hide",function(){j.fire("hide")}),d.on("show",function(){j.fire("show")}),d.show();var l=d.$.get(0),m=a("Slider"),f=new m({dom:l,data:h});c.slider=f},hide:function(){var a=i.get(this),b=a.mask;b&&b.hide()},on:function(a,b){var c=i.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},to:function(a){var b=i.get(this),c=b.slider;c&&c.slideTo(a)}},d}),D("ImageViewer",function(a,b,c){function d(c,d){f.Object.isPlain(c)&&(d=c,c=d.img),k.setGuid(this,b),d=i.clone(b.id,d);var e=new h(this),g=f.Object.remove(d,["sample"]),l=a("Dialog"),m=new l(g),n=d.eventName;m.on(n+"-main",function(){m.hide()}),m.on("hide",function(){e.fire("hide")}),m.on("show",function(){e.fire("show")});var o=d.prefix,p=d.suffix,q={imgId:j.get(o,"img-",p),img:c,sample:d.sample,dialog:m,emitter:e};k.set(this,q)}var f=a("$"),g=a("MiniQuery"),h=g.require("Emitter"),i=a("Config"),j=a("RandomId"),k=a("Mapper");return d.prototype={constructor:d,show:function(a){var b=k.get(this),c=b.imgId,d=b.dialog,g=e.getElementById(c);if(g)return a&&("object"==typeof a&&(a=f(a).attr("src")),g.src=a),void d.show();a=a||b.img,"object"==typeof a&&(a=f(a).attr("src"));var h=b.sample,i=f.String.format(h,{id:c,src:a});d.set("text",i),d.show()},hide:function(){var a=k.get(this),b=a.dialog;b.hide()},on:function(a,b){var c=k.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)}},d}),D("Loading",function(a,b,c){function d(b){var c=t.get(this),d=c.id,f=c.sample,h=a("Style"),i=g.String.format(f,{id:d,"text-id":c.textId,text:c.text,style:h.stringify(b),cssClass:c.cssClass}),j=c.container;c.append?g(j).append(i):g(j).prepend(i);var k=e.getElementById(d);return c.div=k,k}function f(a){i.setGuid(this);var c=a?s[a.presetting]:null;a=m.clone(b.id,c,a);var d=new k(this),e=a.cssClass;e instanceof o&&(e=e.join(" "));var f=a.text;f||0===f||(e+=" NoText"),e=g.Array.keep(e.split(" "),function(a,b){return"same-line"==a?(j.warn('类名 "same-line" 已过时，请使用 "SameLine"'),"SameLine"):a}).join(" ");var h=a.prefix,l=a.suffix,q={id:n.get(h,l),textId:n.get(h,"text-",l),container:a.container,prepend:a.prepend,div:null,sample:p.get(a.sample),text:f,emitter:d,mask:a.mask,masker:null,style:r.get(a),showTime:0,cssClass:e,append:a.append};t.set(this,q)}var g=a("$"),h=a("MiniQuery"),i=h.require("Mapper"),k=h.require("Emitter"),m=a("Config"),n=a("RandomId"),p=b.require("Sample"),r=b.require("Style"),s=b.require("Presettings"),t=new i;return f.prototype={constructor:f,render:function(){},show:function(b,c){"object"==typeof b&&(c=b,b=c.text),c=c||{};var f=t.get(this),h=f.div,i=r.get(f.style,c);h||(h=d.call(this,i)),g(h).css(i);var j=a("Mask"),k=j.filter(f.mask,c.mask),m=f.masker;k?(m||(m=f.masker=new j({container:f.container})),m.show(k)):m&&m.hide(),b!==B&&b!=f.text&&(e.getElementById(f.textId).innerHTML=b,f.text=b),f.showTime=q.now(),g(h).show(),f.emitter.fire("show");var n=c.duration;if(n){var o=this;l(function(){o.hide()},n)}},hide:function(a){function b(){var a=c.masker;a&&a.hide(),c.showTime=0,g(d).hide(),c.emitter.fire("hide")}var c=t.get(this),d=c.div;if(d){if(!a)return void b();var e=q.now(),f=c.showTime,h=e-f,i=a-h;i>0?l(b,i):b()}},remove:function(){var a=t.get(this),b=a.div;if(b){var c=a.masker;c&&c.remove(),a.div=null,a.masker=null,a.hasBind=!1,g(b).off(),e.body.removeChild(b),a.emitter.fire("remove")}},on:function(a,b){var c=t.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=t.get(this),b=a.emitter;this.remove(),b.destroy(),t.remove(this)}},f}),D("Loading/Sample/iOS",['<div id="{id}" class="KISP Loading-iOS {cssClass}" style="{style}">','    <div class="Main">','        <div class="Item-0"></div>','        <div class="Item-1"></div>','        <div class="Item-2"></div>','        <div class="Item-3"></div>','        <div class="Item-4"></div>','        <div class="Item-5"></div>','        <div class="Item-6"></div>','        <div class="Item-7"></div>','        <div class="Item-8"></div>','        <div class="Item-9"></div>','        <div class="Item-10"></div>','        <div class="Item-11"></div>',"    </div>",'    <span id="{text-id}" class="Text">{text}</span>',"</div>"].join("\n")),D("Loading/Presettings",{fullscreen:{width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,"font-size":15,"margin-top":0,"margin-left":0,"margin-right":0,"margin-bottom":0,"border-radius":0},"scroller.pulldown":{sample:"iOS",cssClass:"SameLine",text:"加载中...",background:"none",color:"#000",height:26,width:"100%",left:0,top:0,bottom:"initial",right:"initial","font-size":15,"margin-top":0,"border-radius":0},"scroller.pullup":{sample:"iOS",cssClass:"SameLine",text:"加载中...",background:"none",color:"#000",height:26,width:"100%",top:"initial",right:"initial",left:0,bottom:0,"font-size":15,"margin-top":0,"border-radius":0}}),D("Loading/Sample",function(a,b,c){function d(c){var d=e[c];return d?d:(d=a(b,c),e[c]=d,d)}var e={};return{get:d}}),D("Loading/Style",function(a,b,c){function d(a){var b=typeof a;return"number"==b?0-a/2+"px":"string"==b&&"px"==a.slice(-2)?(a=parseInt(a),0-a/2+"px"):"0px"}function e(a,b,c){var e=[].slice.call(arguments),g=f.filter(e,["background","border-radius","bottom","color","font-size","height","left","margin-top","right","top","width","z-index","position"]);return g["margin-left"]=d(g.width),g["margin-top"]===B&&(g["margin-top"]=d(g.height)),g}var f=(a("$"),a("Style"));return{get:e}}),D("Mask",function(a,b,c){function d(a){g.setGuid(this),a=i.clone(b.id,a);var c=a.prefix,d=a.suffix,e=new h(this),f={id:j.get(c,d),div:null,sample:k,"volatile":a["volatile"],emitter:e,style:m.get(a),showTime:0,container:a.container,duration:a.duration,append:a.append,eventName:a.eventName};n.set(this,f)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=f.require("Emitter"),i=a("Config"),j=a("RandomId"),k=b.require("Sample"),m=b.require("Style"),n=new g;return d.prototype={constructor:d,$:null,render:function(){var a=n.get(this);if(!a.div){var b=a.id,c=a.sample,d=a.eventName,f=e.String.format(c,{id:b}),g=e(a.container);a.append?g.append(f):g.prepend(f);var h=a.div=e("#"+b);this.$=h;var i=m.get(a.style);if(h.css(i),a["volatile"]){var j=this,k=function(){j.hide();var a=h.css("opacity");j.show({opacity:0}),l(function(){h.css("opacity",a).hide()},200)};"touch"==d?h.touch(k):h.on(d,k)}}},show:function(a){"number"==typeof a&&(a={duration:a});var b=n.get(this),c=b.emitter;this.render();var d=b.div;if(a){var e=m.get(b.style,a);d.css(e)}b.showTime=new q,d.show(),c.fire("show");var f=a&&"duration"in a?a.duration:b.duration;if(f){var g=this;l(function(){g.hide()},f)}},hide:function(a){function b(){c.showTime=0,d.hide(),c.emitter.fire("hide")}var c=n.get(this),d=c.div;if(d){if(!a)return void b();var e=new q,f=c.showTime,g=e-f,h=a-g;h>0&&l(b,h)}},remove:function(){var a=n.get(this),b=a.div;b&&(a.div=null,b.off(),b=b.get(0),b.parentNode.removeChild(b),a.emitter.fire("remove"))},on:function(a,b){var c=n.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=n.get(this),b=a.emitter;this.remove(),b.destroy(),n.remove(this)}},e.Object.extend(d,{filter:function(a,b){"number"==typeof a&&(a={opacity:a}),"number"==typeof b&&(b={opacity:b});var c=typeof a;return"object"==c&&"object"==typeof b?e.Object.extend({},a,b):b===!1?null:b===!0?a&&"object"==c?a:{}:b===B?"object"==c?a:a?{}:null:"object"==typeof b?b:b?{}:null}}),d}),D("Mask/Sample",['<div id="{id}" class="KISP Mask" style="display: none;"></div>'].join("\n")),D("Mask/Style",function(a,b,c){function d(a,b,c){var d=[].slice.call(arguments),f=e.filter(d,["opacity","top","bottom","background","z-index","position"]);return f}var e=(a("$"),a("Style"));return{get:d}}),D("Toast",function(a,b,c){function d(a){h.setGuid(this),a=j.clone(b.id,a);var c=new i(this),d=a.cssClass;d instanceof o&&(d=d.join(" "));var e=a.text;d+=e||0===e?" HasText":" NoText";var f=a.icon;d+=f?" HasIcon":" NoIcon";var g=a.prefix,l=a.suffix,m={id:k.get(g,l),icon:f,iconId:k.get(g,"icon-",l),textId:k.get(g,"text-",l),div:null,sample:n.get(a.sample),text:e,emitter:c,mask:a.mask,masker:null,style:p.get(a),showTime:0,cssClass:d,duration:a.duration,container:a.container,append:a.append};r.set(this,m)}var f=a("$"),g=a("MiniQuery"),h=g.require("Mapper"),i=g.require("Emitter"),j=a("Config"),k=a("RandomId"),m=b.require("Renderer"),n=b.require("Sample"),p=b.require("Style"),r=new h;return d.prototype={constructor:d,show:function(b,c){var d=typeof b;"object"==d&&(c=b,b=c.text),c=c||{};var e=r.get(this),g=e.div,h=p.get(e.style,c);g||(g=m.render(e,h)),f(g).css(h);var i=a("Mask"),j=i.filter(e.mask,c.mask),k=e.masker;if(j?(k||(k=new i,e.masker=k),k.show(j)):k&&k.hide(),b!==B&&b!=e.text&&(f("#"+e.textId).html(b),e.text=b,f(g).removeClass("NoText").addClass("HasText")),"icon"in c){var n=c.icon;n?(f(g).removeClass("NoIcon").addClass("HasIcon"),n!=e.icon&&(f("#"+e.iconId).removeClass("fa-"+e.icon).addClass("fa-"+n),e.icon=n)):f(g).removeClass("HasIcon").addClass("NoIcon")}e.showTime=new q,f(g).show(),e.emitter.fire("show");var o="duration"in c?c.duration:e.duration;if(o){var s=this;l(function(){s.hide()},o)}},hide:function(a){function b(){var a=c.masker;a&&a.hide(),c.showTime=0,f(d).hide(),c.emitter.fire("hide")}var c=r.get(this),d=c.div;if(d){if(!a)return void b();var e=new q,g=c.showTime,h=e-g,i=a-h;i>0?l(b,i):b()}},remove:function(){var a=r.get(this),b=a.div;if(b){var c=a.masker;c&&c.remove(),a.div=null,a.masker=null,a.hasBind=!1,f(b).off(),e.body.removeChild(b),a.emitter.fire("remove")}},on:function(a,b){var c=r.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=r.get(this),b=a.emitter;this.remove(),b.destroy(),r.remove(this)}},d}),D("Toast/Sample/font-awesome",['<div id="{id}" class="KISP Toast-font-awesome {cssClass}">',"    <div>",'        <i id="{icon-id}" class="fa fa-{icon}"></i>',"    </div>",'    <span id="{text-id}" class="Text">{text}</span>',"</div>"].join("\n")),D("Toast/Renderer",function(a,b,c){function d(b,c){var d=a("Style"),g=b.id,h=b.sample,i=f.String.format(h,{id:g,icon:b.icon,"icon-id":b.iconId,"text-id":b.textId,text:b.text,style:d.stringify(c),cssClass:b.cssClass}),j=b.container;b.append?f(j).append(i):f(j).prepend(i);var k=e.getElementById(g);return b.div=k,k}var f=a("$");return{render:d}}),D("Toast/Sample",function(a,b,c){function d(c){var d=e[c];return d?d:(d=a(b,c),e[c]=d,d)}var e={};return{get:d}}),D("Toast/Style",function(a,b,c){function d(a){var b=typeof a;return"number"==b?0-a/2+"px":"string"==b&&"px"==a.slice(-2)?(a=parseInt(a),0-a/2+"px"):void 0}function e(a,b,c){var e=[].slice.call(arguments),g=f.filter(e,["background","border-radius","bottom","color","font-size","height","left","margin-top","right","top","width","z-index","position"]),h=d(g.width);return h&&(g["margin-left"]=h),h=d(g.height),h&&(g["margin-top"]=h),g}var f=(a("$"),a("Style"));return{get:e}}),D("Navigator",function(a,b,c){function e(a){h.setGuid(this);var b=a.hash,c=g.require("Emitter"),e=new c(this),f={emitter:e,statcks:[],quiet:!1,hash:b};if(i.set(this,f),b){var j=this,k=g.require("Url");k.hashchange(d,function(a,b){e.fire("hash-change",[a,b]);var c=f.quiet;return c?void(f.quiet=!1):void j.back()})}}var f=a("$"),g=a("MiniQuery"),h=g.require("Mapper"),i=new h;e.prototype={constructor:e,on:function(a,b){var c=i.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},to:function(a,b,c){var e=i.get(this),h=e.emitter,j=e.statcks,k=j.slice(-1)[0];k&&(h.fire("before-to",k),h.fire("before-to",[k,a])),j.push(a);var l=[].slice.call(arguments,0);h.fire("to",a,l.slice(1)),h.fire("to",l),h.fire("change",[k,a]);var m=e.hash;if(m=m?"function"==typeof m?m.call(this,a):"string"==typeof m?m+a:m===!0?f.String.random():!1:!1){e.quiet=!0;var n=g.require("Url");n.setHash(d,m)}},back:function(a){if(a=a||1,0>a)throw new r("要后退的步数必须大于 0");var b=i.get(this),c=b.statcks,d=c.length-1,e=d-a;if(!(0>e)){var f=c[d],g=c[e];c.splice(e+1);var h=b.emitter;return h.fire("back",[f,g]),h.fire("change",[f,g]),g}},remove:function(a,b){if(0>a)throw new r("要移除的开始索引值必须大于或等于 0");if(b=b||1,0>b)throw new r("要移除的个数必须大于 0");var c=i.get(this),d=c.statcks,e=d.length-1,f=a+b;if(f>e)throw new r("要移除的结束索引不能包括当前索引: "+e);d.splice(a,b)},removeLast:function(a,b){if(1==arguments.length)b=a,a=1;else if(1>a)throw new r("要移除的开始索引值必须大于等于 1");if(0>b)throw new r("要移除的个数必须大于 0");var c=i.get(this),d=c.statcks;d.reverse(),d.splice(a,b),c.statcks=d.reverse()},count:function(){var a=i.get(this);return a.statcks.length},get:function(a){var b=i.get(this),c=b.statcks,d=c.length;return 0>a&&(a+=d),c[a]}},b.exports=e}),D("NoData",function(a,b,c){function d(a,c){e.Object.isPlain(a)?c=a:c.container=a,g.setGuid(this),c=j.clone(b.id,c);var d=c.cssClass;d instanceof o&&(d=d.join(" "));var f=c.prefix,k=c.suffix,p={div:null,top:c.top,bottom:c.bottom,icon:c.icon,text:c.text,emitter:new h(this),container:c.container,append:c.append,id:i.get(f,k),textId:i.get(f,"text-",k),text:c.text,cssClass:d,sample:l,style:m.get(c),scrollable:c.scrollable,pulldown:c.pulldown,visible:!1};n.set(this,p)}var e=a("$"),f=a("MiniQuery"),g=(a("IScroll"),f.require("Mapper")),h=f.require("Emitter"),i=a("RandomId"),j=a("Config"),k=b.require("Renderer"),l=b.require("Sample"),m=b.require("Style"),n=new g;return d.prototype={constructor:d,show:function(a){var b=n.get(this),c=b.div;c?e("#"+b.textId).html(a||b.text):c=k.render(b,{text:a}),b.visible=!0,e(c).show(),b.emitter.fire("show")},hide:function(){var a=n.get(this),b=a.div;b&&(a.visible=!1,e(b).hide(),a.emitter.fire("hide"))},toggle:function(a){a instanceof o&&(a=0==a.length);var b=n.get(this),c=b.visible;0==arguments.length?c?this.hide():this.show():c&&!a?this.hide():!c&&a&&this.show()},on:function(a,b){var c=n.get(this),d=c.emitter,e=(c.scroller,[].slice.call(arguments,0));d.on.apply(d,e)},destroy:function(){var a=n.get(this),b=a.scroller;b.destroy();var c=a.emitter;c.destroy(),n.remove(this)}},d}),D("NoData/Renderer",function(a,b,c){function d(b,c){var d=b.id,h=b.sample,i=b.style,j=c.text||b.text,k=f.String.format(h,{id:d,"text-id":b.textId,text:j,style:g.stringify(i),cssClass:b.cssClass}),l=b.container;b.append?f(l).append(k):f(l).prepend(k);var m=e.getElementById(d);if(b.div=m,b.scrollable){var n=a("Scroller"),o=new n(m,{top:b.top,bottom:b.bottom}),p=b.pulldown;p&&o.pulldown(p)}return m}var f=a("$"),g=a("Style");return{render:d}}),D("NoData/Sample",['<div id="{id}" class="KISP NoData {cssClass}" style="{style}">',"    <ul>",'        <li class="Icon"></li>','        <li id="{text-id}" class="Text">{text}</li>',"    </ul>","</div>","",""].join("\n")),D("NoData/Style",function(a,b,c){function d(a,b,c){var d=[].slice.call(arguments),f=e.filter(d,["background","bottom","color","font-size","top","z-index"]);return f}var e=(a("$"),a("Style"));return{get:d}}),D("NumberPad",function(a,b,c){function d(a){g.setGuid(this),a=i.clone(b.id,a);var c=a.cssClass;c instanceof o&&(c=c.join(" "));var d={emitter:new h(this),container:a.container,append:a.append,prefix:a.prefix,suffix:a.suffix,cssClass:c,sample:k,style:l.get(a),visible:!1,headerId:"",textId:"",valueId:"",footerId:"",value:a.value,oldValue:"","int":a["int"],decimal:a.decimal,mask:a.mask,masker:null,"volatile":a["volatile"],text:a.text,height:0,speed:a.speed};m.set(this,d)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=f.require("Emitter"),i=a("Config"),j=b.require("Renderer"),k=b.require("Sample"),l=b.require("Style"),m=new g;return d.prototype={constructor:d,show:function(){var a=m.get(this);if(!a.visible){var b=a.div;b||(b=j.render(a,this));var c=a.masker;c&&c.show(),e(b).show().animate({bottom:0},a.speed,function(){a.visible=!0,a.emitter.fire("show")})}},hide:function(){var a=m.get(this),b=a.div;if(b&&a.visible){var c=a.masker;c&&c.hide(),e(b).animate({bottom:-a.height},a.speed,function(){e(b).hide(),a.visible=!1,a.emitter.fire("hide")})}},on:function(a,b){var c=m.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=m.get(this),b=a.emitter;this.remove(),b.destroy(),m.remove(this)},value:function(a){var b=m.get(this);if(0==arguments.length)return b.value;a=x(a);var c=u(a);if(isNaN(c))throw new r("要设置的值必须为合法的数值");var d=a.split("."),f=d[0],g=d[1]||"";f=f.slice(0,b["int"]),g=g.slice(0,b.decimal),a=f,g&&(a=a+"."+g),b.value=a,e("#"+b.valueId).html(a)},set:function(a,b){var c=m.get(this);if(b!=c[a])switch(a){case"value":return void this.value(b);case"text":return c.text=b,e("#"+c.textId).html(b),void e("#"+c.headerId).toggleClass("has-text",!!b);case"decimal":return c.decimal=b,e("#"+c.footerId).toggleClass("no-point",0==b),void this.value(c.value);case"int":return c["int"]=b,void this.value(c.value);default:throw new r("不支持参数 key: "+a)}}},d}),D("NumberPad/Renderer",function(a,b,c){function d(b,c){var d=b.sample,j=b.prefix,k=b.suffix,l=i.get(j,k),m=i.get("text-",k),n=i.get("value-",k),o=i.get("ul-header-",k),p=i.get("ul-footer-",k),q=b.text,r=g.String.format(d,{id:l,"header-id":o,"text-id":m,"value-id":n,"footer-id":p,style:h.stringify(b.style),cssClass:b.cssClass,text:q,"has-text":q?"has-text":"","no-point":b.decimal>0?"":"no-point",value:b.value}),s=b.container;b.append?g(s).append(r):g(s).prepend(r);var t=e.getElementById(l);g.Object.extend(b,{div:t,textId:m,valueId:n,headerId:o,footerId:p});var u=g(t),v=u.height();b.height=v,u.css("bottom",-v);var w=a("Mask"),x=w.filter(b.mask);return x&&(b.masker=new w(x)),f(b,c),t}function f(a,b){function c(b){a.oldValue=a.value,a.value=h.innerHTML=b}var d=a.div,f=a.emitter,h=e.getElementById(a.valueId);a["volatile"]&&a.masker.on("click",function(){b.hide()}),g(d).touch({'[data-cmd="done"]':function(){f.fire("done",[a.value]),b.hide()},'[data-cmd="back"]':function(){var b=a.value;b=b.slice(0,-1),c(b),f.fire("back",[a.value,a.oldValue])},"[data-key]":function(){var b=this,d=b.getAttribute("data-key"),e=a.value;f.fire("key",d,[a.value]),f.fire("key",[d,a.value]);var g=e.indexOf(".")>=0;if("."==d){if(g)return;e||(e="0")}e+=d;var h=e.split(".");return h[0].length>a["int"]?(f.fire("overflow","int",[a.value]),void f.fire("overflow",[a.value])):g&&h[1].length>a.decimal?(f.fire("overflow","decimal",[a.value]),void f.fire("overflow",[a.value])):void c(e)}},"pressed")}var g=a("jquery-plugin/touch"),h=a("Style"),i=a("RandomId");return{render:d}}),D("NumberPad/Sample",["",'<div id="{id}" class="KISP NumberPad {cssClass}" style="{style}">','    <ul id="{header-id}" class="header {has-text}">','        <li id="{text-id}" class="text">{text}</li>','        <li id="{value-id}" class="value">{value}</li>','        <li class="ok">','            <span data-cmd="done">完成</span>',"        </li>","    </ul>",'    <div class="main">',"        <ul>",'            <li><span data-key="1">1</span></li>','            <li><span data-key="2">2</span></li>','            <li><span data-key="3">3</span></li>',"        </ul>","        <ul>",'            <li><span data-key="4">4</span></li>','            <li><span data-key="5">5</span></li>','            <li><span data-key="6">6</span></li>',"        </ul>","        <ul>",'            <li><span data-key="7">7</span></li>','            <li><span data-key="8">8</span></li>','            <li><span data-key="9">9</span></li>',"        </ul>",'        <ul id="{footer-id}" class="special {no-point}">','            <li class="key-point"><span data-key=".">.</span></li>','            <li><span data-key="0" class="zero">0</span></li>','            <li><span data-cmd="back" class="icon-back"></span></li>',"        </ul>","    </div>","</div>"].join("\n")),
D("NumberPad/Style",function(a,b,c){function d(a,b,c){var d=[].slice.call(arguments),f=e.filter(d,["background","bottom","color","font-size","top","z-index"]);return f}var e=(a("$"),a("Style"));return{get:d}}),D("Panel",function(a,b,c){function d(a,c){g.setGuid(this),e.Object.isPlain(a)&&(c=a,a=c.el,delete c.el),c=i.clone(b.id,c);var d={emitter:new h(this),outerEmitter:new h,container:a,rendered:!1,showAfterRender:c.showAfterRender,cssClass:c.cssClass,visible:!1,byRender:!1,template:null};j.set(this,d),this.$=e(a)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=f.require("Emitter"),i=a("Config"),j=new g;return d.prototype={constructor:d,$:null,show:function(){var a=j.get(this),b=a.container,c=a.emitter;b=e(b);var d=[].slice.call(arguments);b.show.apply(b,d),a.visible=!0;var f=a.byRender;a.byRender=!1,c.fire("show",[f])},hide:function(){var a=j.get(this),b=a.container,c=a.emitter;b=e(b);var d=[].slice.call(arguments);b.hide.apply(b,d),a.visible=!1,c.fire("hide")},toggle:function(a){var b=j.get(this),c=b.visible;0==arguments.length?c?this.hide():this.show():c&&!a?this.hide():!c&&a&&this.show()},template:function(b,c){var d=e.Object.isPlain(b)?b:{names:b,fn:c},f=a("Template"),g=j.get(this),h=g.container;g.template=new f(h,d)},fill:function(b,c){var d=j.get(this),e=d.emitter,f=d.template;if(f)f.fill(b,c);else{var g=a("Template");g.fill(d.container,b,c)}e.fire("fill",[b])},render:function(){var a=[].slice.call(arguments),b=j.get(this),c=b.emitter,d=b.container,f=b.cssClass,g=b.rendered;g||c.fire("init",a),c.fire("before-render",a),e(d).addClass(f),c.fire("render",a),b.rendered=!0,b.showAfterRender&&(b.byRender=!0,this.show()),c.fire("after-render",a)},refresh:function(){var a=j.get(this),b=a.emitter,c=[].slice.call(arguments);b.fire("refresh",c)},reset:function(){var a=j.get(this),b=a.emitter,c=[].slice.call(arguments);b.fire("reset",c)},visible:function(){var a=j.get(this);return a.visible},rendered:function(){var a=j.get(this);return a.rendered},destroy:function(){var a=j.get(this),b=a.emitter;b.destroy(),j.remove(this)},on:function(a,b){var c=j.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},fire:function(a,b){var c=j.get(this),d=c.outerEmitter,b=[].slice.call(arguments,0);d.fire.apply(d,b)},wrap:function(a){var b=j.get(this),c=b.outerEmitter,d={on:function(){var a=[].slice.call(arguments,0);c.on.apply(c,a)}};for(var f in this)if("_"!=f.slice(0,1)&&!/^(constructor|fire|on|wrap)$/g.test(f)){var g=this[f];"function"==typeof g&&(g=g.bind(this)),d[f]=g}return a?e.Object.extend(d,a):d}},d}),D("Scroller/pull",function(a,b,c){a("$");return function(a){var b=0,c=!1,d="pulldown",e=0,f=0,g=a.emitter,h=a.scroller;h.on("scrollStart",function(){b=0;var g=this.directionY,i=this.distY;if(c=0==g?0>i:g>0,d=c?"pullup":"pulldown",this.isWaitingForManualReset=!1,c){var j=h.maxScrollY,k=a.pullup;e=k.min-j,f=k.max-j}else{var l=a.pulldown;e=l.min,f=l.max}}),h.on("scroll",function(){var a=this.y;c&&(a=-a),e>a?0==(1&b)&&(b=1,g.fire(d,"start")):a>=e&&f>a?0==(2&b)&&(b=2,g.fire(d,"enter")):a>=f&&0==(4&b)&&(b=4,g.fire(d,"reach"))}),h.on("beforeScrollEnd",function(){4==(4&b)?(this.isWaitingForManualReset=!0,g.fire(d,"release")):g.fire(d,"start")})}}),D("Scroller",function(a,b,c){function d(a,c){function d(){var a=g.hasHorizontalScroll,b=g.hasVerticalScroll,c=q.length;return 1==c&&(a||b)||2==c&&a&&b}f.Object.isPlain(a)&&(c=a,a=c.el),i.setGuid(this),c=k.clone(b.id,c);var e=f.Object.filter(c,["scrollbars","shrinkScrollbars","preventDefault","probeType"]),g=new h(a,e),o=m.filter(c,["top","left","right","bottom","width"]);f(a).addClass("KISP Scroller").css(o);var p=new j(this),q=g.indicators||[];q=f.Array.keep(q,function(a,b){return a=f(a.indicator),a.hide(),a});var r={emitter:p,scroller:g,enabled:c.enabled,indicators:q,pulldown:{},pullup:{},hasBindPull:!1,el:a};n.set(this,r),g.on("scroll",function(){this.hasVerticalScroll||this._translate(0,.5*this.distY>>0)});var s=null,t=!1;g.on("scrollStart",function(){t=!0,clearTimeout(s),d()&&f.Array.each(q,function(a,b){a.css("opacity",1),a.show()})}),g.on("scrollEnd",function(){t=!1,s=l(function(){d()&&f.Array.each(q,function(a,b){a.fadeOut("fast",function(){t&&(a.css("opacity",1),a.show())})})},100)}),c.enabled||this.disable()}var f=a("$"),g=a("MiniQuery"),h=a("IScroll"),i=g.require("Mapper"),j=g.require("Emitter"),k=a("Config"),m=a("Style"),n=new i;return e.addEventListener("touchmove",function(a){a.preventDefault()},!1),d.prototype={constructor:d,on:function(a,b){var c=n.get(this),d=c.emitter,e=(c.scroller,[].slice.call(arguments,0));d.on.apply(d,e)},refresh:function(b){var c=n.get(this),d=c.scroller,e=c.indicators,g=[].slice.call(arguments,1),h=a("Fn");h.delay(b,function(){d.refresh.apply(d,g),f.Array.each(e,function(a,b){a.hide()})})},reset:function(){var a=n.get(this),b=a.scroller;b.isWaitingForManualReset=!1},pulldown:function(a,c){var d=n.get(this);if(d.pulldown={min:a,max:c},!d.hasBindPull){var e=b.require("pull");e(d),d.hasBindPull=!0}},pullup:function(a,c){var d=n.get(this);if(d.pullup={min:a,max:c},!d.hasBindPull){var e=b.require("pull");e(d),d.hasBindPull=!0}},to:function(a){var b=n.get(this),c=b.scroller,d=c.options;c.scrollTo(0,a,d.bounceTime,d.bounceEasing)},toBottom:function(a){var b=n.get(this),c=b.scroller,d=c.options,e=c.maxScrollY;a=e-a,c.scrollTo(0,a,d.bounceTime,d.bounceEasing)},enable:function(){var a=n.get(this);a.enabled=!0;var b=a.scroller;b.enable()},disable:function(){var a=n.get(this);a.enabled=!1;var b=a.scroller;b.disable()},toggleEnable:function(a){var b=n.get(this),c=b.enabled;0==arguments.length?c?this.disable():this.enable():c&&!a?this.disable():!c&&a&&this.enable()},destroy:function(){var a=n.get(this),b=a.scroller;b.destroy();var c=a.emitter;c.destroy(),n.remove(this)},get:function(a){var b=n.get(this),c=b.scroller;return c[a]},invoke:function(a,b,c){var d=n.get(this),e=d.scroller,f=[].slice.call(arguments,1);return e[a].apply(e,f)}},d}),D("Slider",function(a,b,c){var d=a("iSlider");return d}),D("Tabs",function(a,b,c){function d(a,c){g.setGuid(this),e.Object.isPlain(a)&&(c=a,a=c.container),c=i.clone(b.id,c);var d={emitter:new h(this),container:a,activedIndex:-1,activedNode:null,activedClass:c.activedClass,pressedClass:c.pressedClass,repeated:c.repeated,looped:c.looped,eventName:c.eventName,list:[],indexKey:c.field.index,eventKey:c.field.event,nodes:null,selector:c.selector,change:null,old:null};k.set(this,d);var f=c.list;f&&this.render(f);var j=c.current;"number"==typeof j&&this.active(j);var l=c.change;l&&this.on("change",l)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=f.require("Emitter"),i=a("Config"),j=(a("RandomId"),b.require("Helper")),k=new g;return d.prototype={constructor:d,render:function(b,c){var d=k.get(this),e=d.container;if(b){var f=a("Template");f.fill(e,b,c),d.list=b,d.nodes=null,d.activedNode=null,d.activedIndex=-1}if(!d.change){var g=d.eventName,h=d.selector,i=d.pressedClass,l=this,m=d.change=function(a){var b=j.getIndex(d,this);l.active(b)};if("touch"==g){var n=a("jquery-plugin/touch");n(e).touch(h,m,i)}else{var n=a("$");n(e).on(g,h,m)}}},active:function(a,b){var c=k.get(this),d=c.list;"number"!=typeof a&&(a=j.findIndex(d,a,arguments[1]));var f=c.activedIndex,g=a==f;if(!g||c.repeated){var h=c.activedNode;if(!g){f=c.activedIndex=a;var i=c.activedClass;h&&e(h).removeClass(i),h=c.activedNode=j.getNode(c,a),e(h).addClass(i)}var l=c.emitter,m=d[a],n={item:m,index:a,element:h,event:event},o=c.old;if(c.old=n,!b){var p=[m,a,n,o];l.fire("before-change",p),l.fire("change",a,p);var q=c.eventKey;q&&l.fire("change",x(m[q]),p),l.fire("change",p)}}},previous:function(a){var b=k.get(this),c=b.list,d=b.looped,e=b.activedIndex;if(0==e){if(!d)return;e=c.length}this.active(e-1,a)},next:function(a){var b=k.get(this),c=b.list,d=b.looped,e=b.activedIndex;if(e==c.length-1){if(!d)return;e=-1}this.active(e+1,a)},show:function(a){var b=k.get(this),c=b.container;e(c).show()},hide:function(a){var b=k.get(this),c=b.container;e(c).hide()},on:function(a,b){var c=k.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)},destroy:function(){var a=k.get(this),b=a.emitter;b.destroy();var c=a.container,d=a.eventName,f=a.selector,g=a.change;e(c).off(d,f,g),k.remove(this)}},e.Object.extend(d,{}),d}),D("Tabs/Helper",function(a,b,c){function d(a){var b=a.nodes;return b||(b=a.nodes=h(a.container).find(a.selector).toArray()),b}function e(a,b){var c=a.indexKey,e=b.getAttribute(c);if(e)return+e;var f=d(a);return h.Array.findIndex(f,function(a,c){return a===b})}function f(a,b){var c=d(a);return c[b]}function g(a,b,c){var d=typeof b;if("object"==d)return h.Array.findIndex(a,function(a,c){return b===a});if("string"==d)return h.Array.findIndex(a,function(a,d){return a[b]===c});if("function"==d)return h.Array.findIndex(a,b);throw new r("无法识别的参数 key: "+d)}var h=a("$");return{getIndex:e,getNode:f,findIndex:g}}),D("Template",function(a,b,c){function d(a,c){g.setGuid(this),c=i.clone(b.id,c);var d={container:a,names:c.names,list:c.list,fn:c.fn,outer:c.outer,root:c.root,item:c.item,emitter:new h,info:null,sample:""};m.set(this,d)}var e=a("$"),f=a("MiniQuery"),g=f.require("Mapper"),h=f.require("Emitter"),i=a("Config"),j=b.require("Multiple"),k=b.require("Simple"),l=b.require("Static"),m=new g;return d.prototype={constructor:d,fill:function(a,b){"function"==typeof a?(b=a,a=null):a instanceof o||(a=[a]);var c=m.get(this);a=a||c.list,b=b||c.fn;var d=c.names,f=d&&d.length?j.getHTML(c,0,a,b):k.getHTML(c,a,b);e(c.container).html(f),c.emitter.fire("fill")},on:function(a,b){var c=m.get(this),d=c.emitter,e=[].slice.call(arguments,0);d.on.apply(d,e)}},e.Object.extend(d,l)}),D("Template/Multiple",function(a,b,c){function d(a){var b=a.names,c=a.outer,d=a.item.begin,e=a.item.end,g={},h=f.Array.keep(b,function(a,b){var h=f.String.random(c);g[a]=h;var i={name:a},j={name:a,begin:f.String.format(d,i),end:f.String.format(e,i),outer:"{"+h+"}"};return j});h=[{name:f.String.random(),begin:a.root.begin,end:a.root.end}].concat(h);var i=a.container,j=f(i).html(),k=f.String.getTemplates(j,h);return{name$outer:g,tags:h,samples:k}}function e(a,b,c,e){function g(a,b,c){var d=i[a],e=d.name,h=j[e];return f.Array.keep(b,function(b,d){var e=c(b,d),j=e.data||{},l=a+1,m=i[l];if(m){var n=k[m.name];n&&(j[n]=g(l,e.list,e.fn))}var o=f.String.format(h,j);return o}).join("")}var h=a.info=a.info||d(a),i=h.tags,j=h.samples,k=h.name$outer;return g(b,c,e)}var f=a("$");return{getHTML:e}}),D("Template/Simple",function(a,b,c){function d(a){var b=a.container,c=a.root,d=f(b).html(),e=f.String.between(d,c.begin,c.end);return e}function e(a,b,c){var e,g=a.sample=a.sample||d(a);e=b instanceof o?f.Array.keep(b,function(a,b){return c&&(a=c(a,b)),f.String.format(g,a)}).join(""):f.String.format(g,b),f(a.container).html(e)}var f=a("$");return{getHTML:e}}),D("Template/Static",function(a,b,c){function d(a,b,c){if(g.Object.isPlain(a))return c=b,void g.Object.each(a,function(a,b){d(a,b,c)});if("string"==typeof a){var h=a;0==h.indexOf("#")&&(h=h.slice(1)),a=e.getElementById(h)}var j=f(a);b instanceof o?a.innerHTML=g.Array.keep(b,function(a,b){return c&&(a=c(a,b)),i(j,a)}).join(""):a.innerHTML=i(j,b)}function f(a){var b;"string"==typeof a?(b=a,0==b.indexOf("#")&&(b=b.slice(1)),a=e.getElementById(b)):(b=a.id,b||(b=a.getAttribute(k),b||(b=a.tagName.toLowerCase()+"-"+g.String.random(),a.setAttribute(k,b))));var c=j[b];if(!c){var d=l.root;c=g.String.between(a.innerHTML,d.begin,d.end),j[b]=c}return c}var g=a("$"),h=a("Config"),i=g.String.format,j={},k="data-template-id-"+g.String.random(4).toLowerCase(),l=h.get(b.parent.id);return{fill:d,get:f}}),D("View",function(a,b,c){function d(c,d){d=e.clone(b.id,d);var f=a("Panel"),g=new f(c,d);g.$.addClass("KISP View");var h=d.background;return h&&g.$.css("background",h),g}var e=a("Config");return d}),D("jquery-plugin/touch",function(a,b,c){function d(a){var b=(a.type,a.tagName.toLowerCase());return"textarea"==b?!0:"input"==b?!0:!1}function e(a,b,c){if(f.Object.isPlain(a)){var g=this;return c=b,b=null,f.Object.each(a,function(a,b){e.call(g,a,b,c)}),this}var h=0,i=0;return"function"==typeof a?(c=b,b=a,a=null,f(this).on({touchstart:function(a){var b=a.originalEvent,e=b.changedTouches[0];h=e.pageX,i=e.pageY,c&&f(this).addClass(c);var g=b.target;d(g)||a.preventDefault()},touchend:function(a){c&&f(this).removeClass(c);var d=a.originalEvent.changedTouches[0],e=d.pageX-h,g=d.pageY-i,j=t.sqrt(e*e+g*g);if(h=0,i=0,!(j>10)){var k=[].slice.call(arguments);b.apply(this,k)}}})):f(this).delegate(a,{touchstart:function(a){var b=a.originalEvent,e=b.changedTouches[0];h=e.pageX,i=e.pageY,c&&f(this).addClass(c);var g=b.target;d(g)||a.preventDefault()},touchend:function(a){c&&f(this).removeClass(c);var d=a.originalEvent.changedTouches[0],e=d.pageX-h,g=d.pageY-i,j=t.sqrt(e*e+g*g);if(h=0,i=0,!(j>10)){var k=[].slice.call(arguments,0);b.apply(this,k)}}})}var f=a("$");return f.Object.extend(f.fn,{touch:e}),f}),D("API.defaults",{successCode:200,field:{code:"code",msg:"msg",data:"data"},proxy:null,delay:!1,random:!0,url:"",prefix:"",ext:"",data:null,query:null,timeout:0,serialize:function(a,b){var c=E("$"),d=c.Object.toJson(b);return encodeURIComponent(d)}}),D("CloudAPI.defaults",{successCode:200,field:{code:"code",msg:"msg",data:"data"},proxy:null,delay:!1,random:!0,url:"http://183.2.171.10/basecloud/common/BusinessAction",prefix:"",ext:"",data:null,query:null,timeout:0,serialize:function(a,b){var c=E("$"),d=c.Object.toJson(b);return encodeURIComponent(d)},encrypted:!1,token:function(){var a=E("$"),b=a.require("Url");return b.getQueryString(d,"apiToken")},eid:"",openid:"",appid:"",console:!0}),D("Proxy.defaults",{base:"",delay:{min:500,max:3e3}}),D("SSH.API.defaults",{successCode:200,field:{code:"Result",msg:"ErrMsg",data:"Data"},proxy:null,prefix:"",timeout:0,eid:"",openid:"",appid:"",netid:"",pubacckey:"",timestamp:"",nonce:"",pubaccid:"",data:null,msg:"网络繁忙，请稍候再试"}),D("SSH.defaults",{ext:"",successCode:200,field:{code:"Result",msg:"ErrMsg",data:"DataJson"},proxy:null,prefix:"",eid:"",openid:"",appid:"",netid:"",pubacckey:"",timestamp:"",nonce:"",pubaccid:"",data:null,console:!0,timeout:0}),D("SSH/Server.defaults",{ext:"",successCode:200,field:{code:"Result",msg:"ErrMsg",data:"Data"},cache:"session"}),D("SSH/Server/Config.defaults",{url:"http://mob.cmcloud.cn/kisplus/kisplusconfig.aspx?callback=?",cache:"session",host:""}),D("LocalStorage.defaults",{name:""}),D("Module.defaults",{seperator:"/",crossover:!1,repeated:!1}),D("SessionStorage.defaults",{name:""}),D("Url.defaults",{root:f.protocol+"//"+f.host+f.pathname.split("/").slice(0,-1).join("/")+"/",replacer:{root:"~",edition:"@"},id:"kisp-script"}),D("CloudHome.API.defaults",{field:{success:"success",code:"errorCode",msg:"error",data:"data"},delay:!1}),D("ImageReader.defaults",{loading:"读取中..."}),D("WeChat.defaults",{debug:!1,appid:"",eid:"",timestamp:parseInt((new q).getTime()/1e3),noncestr:t.random().toString(36).slice(2),url:d.location.href.split("#")[0],js:"http://res.wx.qq.com/open/js/jweixin-1.0.0.js",login:{url:"http://mob.cmcloud.cn/servercloud/weixin/kisapp",data:{focus:0,type:1,eid:"",from_url:""}},apis:"*",retryAfterExpired:!0}),D("WeChat/Signature.defaults",{name:"Jsapi_Signature",url:"http://mob.cmcloud.cn/servercloud/weixin/"}),D("Alert.defaults",{button:"确定","volatile":!1,mask:!0,autoClosed:!0,width:"80%","z-index":99999}),D("App.defaults",{mask:{opacity:0,duration:500,"z-index":99999},animated:!0,slide:{width:.25,k:.6}}),D("CityPicker.defaults",{cssClass:"CityPicker",height:260,width:"100%",mask:.2,title:"选择地址",sample:'<iframe id="{id}" src="{dir}iframe/CityPicker.html?id={id}&title={title}"></iframe>'}),D("Confirm.defaults",{height:140,autoClose:!0,"z-index":99999,buttons:[{text:"取消"},{text:"确定",name:"ok",color:"red"}]}),D("Dialog.defaults",{prefix:"KISP-Dialog-",suffix:4,mask:!0,scrollable:!0,scroller:{},autoClosed:!0,"volatile":!1,title:"",text:"","z-index":1024,sample:"iOS",cssClass:"",eventName:"touch",width:"80%",height:"50%",buttons:[]}),D("ImageSlider.defaults",{prefix:"KISP-ImageSlider-",suffix:4,"volatile":!0,opacity:1,background:"rgba(0, 0, 0, 0.8)",sample:'<img style="max-width: 100%; max-height: 100%;" src="{src}" />'}),D("ImageViewer.defaults",{width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.4)",border:"none","border-radius":0,cssClass:"main-fullscreen",eventName:"touch",prefix:"KISP-ImageViewer-",suffix:4,sample:'<img id="{id}" style="max-width: 100%; max-height: 100%;" src="{src}" />',scroller:{scrollbars:!1}}),D("Loading.defaults",{prefix:"KISP-Loading-",suffix:4,text:"处理中...",mask:!1,sample:"iOS",cssClass:"",container:e.body,append:!1,background:"rgba(0, 0, 0, 0.7)","border-radius":10,bottom:"initial",color:"#fff","font-size":"15px",height:102,left:"50%",right:"initial",top:"50%",width:120,"z-index":1024}),D("Mask.defaults",{prefix:"KISP-Mask-",suffix:4,"volatile":!1,container:e.body,append:!1,eventName:"touch",duration:0,top:0,bottom:0,opacity:.5,background:"#000","z-index":1024}),D("NoData.defaults",{prefix:"KISP-NoData-",suffix:4,text:"暂无数据",cssClass:"",container:e.body,append:!1,scrollable:!0,pulldown:null}),D("NumberPad.defaults",{prefix:"KISP-NumberPad-",suffix:4,cssClass:"",container:e.body,append:!1,decimal:4,"int":12,mask:.5,"volatile":!0,text:"",value:"",speed:"fast"}),D("Panel.defaults",{showAfterRender:!0,cssClass:""}),D("Scroller.defaults",{scrollbars:!0,shrinkScrollbars:"scale",preventDefault:!1,probeType:2,enabled:!0}),D("Tabs.defaults",{current:null,eventName:"touch",pressedClass:"",activedClass:"",selector:">*",repeated:!1,looped:!1,field:{index:"data-index",event:""}}),D("Template.defaults",{root:{begin:"<!--",end:"-->"},item:{begin:"#--{name}.begin--#",end:"#--{name}.end--#"},outer:64}),D("Toast.defaults",{prefix:"KISP-Toast-",suffix:4,text:"",container:e.body,append:!1,mask:!1,sample:"font-awesome",cssClass:"",icon:"check",duration:0}),D("View.defaults",{background:!1}),C.expose({API:!0,CloudAPI:!0,"SSH.API":!0,"CloudHome.API":!0,CloudHome:!0,"CloudHome.Title":!0,ImageReader:!0,WeChat:!0,$:!0,MiniQuery:!0,IScroll:!0,MD5:!0,Edition:!0,LocalStorage:!0,Mapper:!0,Module:!0,SessionStorage:!0,Style:!0,Url:!0,"jquery-plugin/touch":!0,Dialog:!0,CityPicker:!0,ImageSlider:!0,ImageViewer:!0,Loading:!0,Mask:!0,Navigator:!0,NoData:!0,NumberPad:!0,Panel:!0,Scroller:!0,Tabs:!0,Template:!0,Toast:!0,View:!0}),function(b){var c=b("KISP");a.KISP=c,delete a.$,delete a.MiniQuery}(C.require)}(window,top,parent,window,document,location,navigator,window.localStorage,window.sessionStorage,window.console,history,setTimeout,setInterval,window.JSON,Array,Boolean,Date,Error,Function,Math,Number,Object,RegExp,String,jQuery,MiniQuery,IScroll);